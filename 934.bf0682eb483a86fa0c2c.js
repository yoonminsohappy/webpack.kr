(self.webpackChunk=self.webpackChunk||[]).push([[934],{934:function(n,s,a){"use strict";a.r(s),s.default='<p><a href="https://npmjs.com/package/css-minimizer-webpack-plugin"><img src="https://img.shields.io/npm/v/css-minimizer-webpack-plugin.svg" alt="npm"></a> <a href="https://nodejs.org"><img src="https://img.shields.io/node/v/css-minimizer-webpack-plugin.svg" alt="node"></a> <a href="https://david-dm.org/webpack-contrib/css-minimizer-webpack-plugin"><img src="https://david-dm.org/webpack-contrib/css-minimizer-webpack-plugin.svg" alt="deps"></a> <a href="https://github.com/webpack-contrib/css-minimizer-webpack-plugin/actions"><img src="https://github.com/webpack-contrib/css-minimizer-webpack-plugin/workflows/css-minimizer-webpack-plugin/badge.svg" alt="tests"></a> <a href="https://codecov.io/gh/webpack-contrib/css-minimizer-webpack-plugin"><img src="https://codecov.io/gh/webpack-contrib/css-minimizer-webpack-plugin/branch/master/graph/badge.svg" alt="cover"></a> <a href="https://gitter.im/webpack/webpack"><img src="https://img.shields.io/badge/gitter-webpack%2Fwebpack-brightgreen.svg" alt="chat"></a> <a href="https://packagephobia.now.sh/result?p=css-minimizer-webpack-plugin"><img src="https://packagephobia.now.sh/badge?p=css-minimizer-webpack-plugin" alt="size"></a></p> <p>This plugin uses <a href="https://cssnano.co/">cssnano</a> to optimize and minify your CSS.</p> <p>Just like <a href="https://github.com/NMFR/optimize-css-assets-webpack-plugin">optimize-css-assets-webpack-plugin</a> but more accurate with source maps and assets using query string, allows to cache and works in parallel mode.</p> <h2 id="getting-started">Getting Started<a href="#getting-started" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>To begin, you\'ll need to install <code>css-minimizer-webpack-plugin</code>:</p> <pre><code class="hljs language-console">$ npm install css-minimizer-webpack-plugin --save-dev\n</code></pre> <p>Then add the plugin to your <code>webpack</code> configuration. For example:</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'mini-css-extract-plugin\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> CssMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'css-minimizer-webpack-plugin\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    rules<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/.s?css$/</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">\'css-loader\'</span><span class="token punctuation">,</span> <span class="token string">\'sass-loader\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token comment">// For webpack@5 you can use the `...` syntax to extend existing minimizers (i.e. `terser-webpack-plugin`), uncomment the next line</span>\n      <span class="token comment">// `...`,</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>This will enable CSS optimization only in production mode.</p> <p>If you want to run it also in development set the <code>optimization.minimize</code> option to <code>true</code>:</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js"><span class="token comment">// [...]</span>\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token comment">// [...]</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>And run <code>webpack</code> via your preferred method.</p> <h2 id="note-about-source-maps">Note about source maps<a href="#note-about-source-maps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><strong>Works only with <code>source-map</code>, <code>inline-source-map</code>, <code>hidden-source-map</code> and <code>nosources-source-map</code> values for the <a href="/configuration/devtool/"><code>devtool</code></a> option.</strong></p> <p>Why? Because CSS support only these source map types.</p> <p>The plugin respect the <a href="/configuration/devtool/"><code>devtool</code></a> and using the <code>SourceMapDevToolPlugin</code> plugin. Using supported <code>devtool</code> values enable source map generation. Using <code>SourceMapDevToolPlugin</code> with enabled the <code>columns</code> option enables source map generation.</p> <p>Use source maps to map error message locations to modules (this slows down the compilation). If you use your own <code>minify</code> function please read the <code>minify</code> section for handling source maps correctly.</p> <h2 id="options">Options<a href="#options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="test"><code>test</code><a href="#test" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Type: <code>String|RegExp|Array&#x3C;String|RegExp></code> - default: <code>/\\.css(\\?.*)?$/i</code></p> <p>Test to match files against.</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/\\.foo\\.css$/i</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="include"><code>include</code><a href="#include" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Type: <code>String|RegExp|Array&#x3C;String|RegExp></code> Default: <code>undefined</code></p> <p>Files to include.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        include<span class="token operator">:</span> <span class="token regex">/\\/includes/</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="exclude"><code>exclude</code><a href="#exclude" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Type: <code>String|RegExp|Array&#x3C;String|RegExp></code> Default: <code>undefined</code></p> <p>Files to exclude.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        exclude<span class="token operator">:</span> <span class="token regex">/\\/excludes/</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="parallel"><code>parallel</code><a href="#parallel" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Type: <code>Boolean|Number</code> Default: <code>true</code></p> <p>Use multi-process parallel running to improve the build speed. Default number of concurrent runs: <code>os.cpus().length - 1</code>.</p> <blockquote> <p>ℹ️ Parallelization can speedup your build significantly and is therefore <strong>highly recommended</strong>. If a parallelization is enabled, the packages in <code>minimizerOptions</code> must be required via strings (<code>packageName</code> or <code>require.resolve(packageName)</code>). Read more in <a href="#minimizeroptions"><code>minimizerOptions</code></a></p> </blockquote> <h4 id="boolean"><code>Boolean</code><a href="#boolean" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Enable/disable multi-process parallel running.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        parallel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="number"><code>Number</code><a href="#number" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Enable multi-process parallel running and set number of concurrent runs.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        parallel<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="minify"><code>minify</code><a href="#minify" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Type: <code>Function|Array&#x3C;Function></code> Default: <code>CssMinimizerPlugin.cssnanoMinify</code></p> <p>Allows to override default minify function. By default plugin uses <a href="https://github.com/cssnano/cssnano">cssnano</a> package. Useful for using and testing unpublished versions or forks.</p> <p>Possible options:</p> <ul> <li>CssMinimizerPlugin.cssnanoMinify</li> <li>CssMinimizerPlugin.cssoMinify</li> <li>CssMinimizerPlugin.cleanCssMinify</li> <li>async (data, inputMap, minimizerOptions) => {return {code: <code>a{color: red}</code>, map: <code>...</code>, warnings: []}}</li> </ul> <blockquote> <p>⚠️ <strong>Always use <code>require</code> inside <code>minify</code> function when <code>parallel</code> option enabled</strong>.</p> </blockquote> <h4 id="function"><code>Function</code><a href="#function" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n          level<span class="token operator">:</span> <span class="token punctuation">{</span>\n            <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n              roundingPrecision<span class="token operator">:</span> <span class="token string">\'all=3,px=5\'</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        minify<span class="token operator">:</span> CssMinimizerPlugin<span class="token punctuation">.</span>cleanCssMinify<span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="array"><code>Array</code><a href="#array" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>If an array of functions is passed to the <code>minify</code> option, the <code>minimizerOptions</code> must also be an array. The function index in the <code>minify</code> array corresponds to the options object with the same index in the <code>minimizerOptions</code> array.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">[</span>\n          <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Options for the first function (CssMinimizerPlugin.cssnanoMinify)</span>\n          <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Options for the second function (CssMinimizerPlugin.cleanCssMinify)</span>\n          <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Options for the third function</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n        minify<span class="token operator">:</span> <span class="token punctuation">[</span>\n          CssMinimizerPlugin<span class="token punctuation">.</span>cssnanoMinify<span class="token punctuation">,</span>\n          CssMinimizerPlugin<span class="token punctuation">.</span>cleanCssMinify<span class="token punctuation">,</span>\n          <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> inputMap<span class="token punctuation">,</span> minimizerOptions</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n            <span class="token comment">// To do something</span>\n            <span class="token keyword">return</span> <span class="token punctuation">{</span>\n              code<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">a{color: red}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>\n              map<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{"version": "3", ...}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>\n              warnings<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="minimizeroptions"><code>minimizerOptions</code><a href="#minimizeroptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Type: <code>Object|Array&#x3C;Object></code> Default: <code>{ preset: \'default\' }</code></p> <p>Cssnano optimisations <a href="https://cssnano.co/docs/optimisations">options</a>.</p> <h4 id="object"><code>Object</code><a href="#object" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n          preset<span class="token operator">:</span> <span class="token punctuation">[</span>\n            <span class="token string">\'default\'</span><span class="token punctuation">,</span>\n            <span class="token punctuation">{</span>\n              discardComments<span class="token operator">:</span> <span class="token punctuation">{</span> removeAll<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="array-1"><code>Array</code><a href="#array-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>The function index in the <code>minify</code> array corresponds to the options object with the same index in the <code>minimizerOptions</code> array. If you use <code>minimizerOptions</code> like object, all <code>minify</code> function accept it.</p> <blockquote> <p>If a parallelization is enabled, the packages in <code>minimizerOptions</code> must be required via strings (<code>packageName</code> or <code>require.resolve(packageName)</code>). In this case, we shouldn\'t use <code>require</code>/<code>import</code>.</p> </blockquote> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n          preset<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">\'cssnano-preset-simple\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="processoroptions"><code>processorOptions</code><a href="#processoroptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Type: <code>Object</code> Default: <code>{ to: assetName, from: assetName }</code></p> <p>Allows to specify options <a href="https://postcss.org/api/#processoptions"><code>processoptions</code></a> for the cssnano. The <code>parser</code>,<code> stringifier</code> and <code>syntax</code> can be either a function or a string indicating the module that will be imported.</p> <blockquote> <p>⚠️ <strong>If a function is passed, the <code>parallel</code> option must be disabled.</strong>.</p> </blockquote> <pre><code class="hljs language-js"><span class="token keyword">import</span> sugarss <span class="token keyword">from</span> <span class="token string">\'sugarss\'</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        parallel<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n          processorOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n            parser<span class="token operator">:</span> sugarss<span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n          processorOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n            parser<span class="token operator">:</span> <span class="token string">\'sugarss\'</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="warningsfilter"><code>warningsFilter</code><a href="#warningsfilter" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Type: <code>Function&#x3C;(warning, file, source) -> Boolean></code> Default: <code>() => true</code></p> <p>Allow to filter css-minimizer warnings (By default <a href="https://github.com/cssnano/cssnano">cssnano</a>). Return <code>true</code> to keep the warning, a falsy value (<code>false</code>/<code>null</code>/<code>undefined</code>) otherwise.</p> <blockquote> <p>⚠️ The <code>source</code> argument will contain <code>undefined</code> if you don\'t use source maps.</p> </blockquote> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        <span class="token function-variable function">warningsFilter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">warning<span class="token punctuation">,</span> file<span class="token punctuation">,</span> source</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/Dropping unreachable code/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>warning<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span>\n\n          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/file\\.css/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span>\n\n          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/source\\.css/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span>\n\n          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="examples">Examples<a href="#examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="use-sourcemaps">Use sourcemaps<a href="#use-sourcemaps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Don\'t forget to enable <code>sourceMap</code> options for all loaders.</p> <pre><code class="hljs language-js"><span class="token keyword">const</span> CssMinimizerPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'css-minimizer-webpack-plugin\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  devtool<span class="token operator">:</span> <span class="token string">\'source-map\'</span><span class="token punctuation">,</span>\n  module<span class="token operator">:</span> <span class="token punctuation">{</span>\n    loaders<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token punctuation">{</span>\n        test<span class="token operator">:</span> <span class="token regex">/.s?css$/</span><span class="token punctuation">,</span>\n        use<span class="token operator">:</span> <span class="token punctuation">[</span>\n          MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>\n          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">\'css-loader\'</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span> sourceMap<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">\'sass-loader\'</span><span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token punctuation">{</span> sourceMap<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="remove-all-comments">Remove all comments<a href="#remove-all-comments" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Remove all comments (including comments starting with <code>/*!</code>).</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        minimizerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n          preset<span class="token operator">:</span> <span class="token punctuation">[</span>\n            <span class="token string">\'default\'</span><span class="token punctuation">,</span>\n            <span class="token punctuation">{</span>\n              discardComments<span class="token operator">:</span> <span class="token punctuation">{</span> removeAll<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n            <span class="token punctuation">}</span><span class="token punctuation">,</span>\n          <span class="token punctuation">]</span><span class="token punctuation">,</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="using-custom-minifier-csso">Using custom minifier <a href="https://github.com/css/csso">csso</a><a href="#using-custom-minifier-csso" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>By default plugin uses <a href="https://github.com/cssnano/cssnano">cssnano</a> package. It is possible to use another minify function.</p> <blockquote> <p>⚠️ <strong>Always use <code>require</code> inside <code>minify</code> function when <code>parallel</code> option enabled</strong>.</p> </blockquote> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  devtool<span class="token operator">:</span> <span class="token string">\'source-map\'</span><span class="token punctuation">,</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        <span class="token function-variable function">minify</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> inputMap</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n          <span class="token keyword">const</span> csso <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'csso\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token keyword">const</span> sourcemap <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'source-map\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n          <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>filename<span class="token punctuation">,</span> input<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token keyword">const</span> minifiedCss <span class="token operator">=</span> csso<span class="token punctuation">.</span><span class="token function">minify</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n            filename<span class="token operator">:</span> filename<span class="token punctuation">,</span>\n            sourceMap<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n          <span class="token keyword">if</span> <span class="token punctuation">(</span>inputMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            minifiedCss<span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">applySourceMap</span><span class="token punctuation">(</span>\n              <span class="token keyword">new</span> <span class="token class-name">sourcemap<span class="token punctuation">.</span>SourceMapConsumer</span><span class="token punctuation">(</span>inputMap<span class="token punctuation">)</span><span class="token punctuation">,</span>\n              filename\n            <span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span>\n\n          <span class="token keyword">return</span> <span class="token punctuation">{</span>\n            code<span class="token operator">:</span> minifiedCss<span class="token punctuation">.</span>css<span class="token punctuation">,</span>\n            map<span class="token operator">:</span> minifiedCss<span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="using-custom-minifier-clean-css">Using custom minifier <a href="https://github.com/jakubpawlowicz/clean-css">clean-css</a><a href="#using-custom-minifier-clean-css" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  devtool<span class="token operator">:</span> <span class="token string">\'source-map\'</span><span class="token punctuation">,</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        minify<span class="token operator">:</span> CssMinimizerPlugin<span class="token punctuation">.</span>cleanCssMinify<span class="token punctuation">,</span>\n        <span class="token comment">// Uncomment this line for options</span>\n        <span class="token comment">// minimizerOptions: { compatibility: \'ie11,-properties.merging\' },</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="using-custom-minifier-csso-1">Using custom minifier <a href="https://github.com/css/csso">csso</a><a href="#using-custom-minifier-csso-1" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  devtool<span class="token operator">:</span> <span class="token string">\'source-map\'</span><span class="token punctuation">,</span>\n  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>\n    minimize<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token keyword">new</span> <span class="token class-name">CssMinimizerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        minify<span class="token operator">:</span> CssMinimizerPlugin<span class="token punctuation">.</span>cssoMinify<span class="token punctuation">,</span>\n        <span class="token comment">// Uncomment this line for options</span>\n        <span class="token comment">// minimizerOptions: { restructure: false },</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="contributing">Contributing<a href="#contributing" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>Please take a moment to read our contributing guidelines if you haven\'t yet done so.</p> <p><a href="https://github.com/webpack-contrib/css-minimizer-webpack-plugin/blob/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p> <h2 id="license">License<a href="#license" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><a href="https://github.com/webpack-contrib/css-minimizer-webpack-plugin/blob/master/LICENSE">MIT</a></p> '}}]);