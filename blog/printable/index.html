<!DOCTYPE html><html lang="en"><head><title data-rh="true">인쇄 가능한 페이지 | 웹팩</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="theme-color" content="#2B3A42"/><meta data-rh="true" name="viewport" content="width=device-width, initial-scale=1"/><meta data-rh="true" name="robots" content="noindex,nofollow"/><meta data-rh="true" name="description" content="웹팩은 모듈 번들러입니다. 주요 목적은 브라우저에서 사용할 수 있도록 JavaScript 파일을 번들로 묶는 것이지만, 리소스나 애셋을 변환하고 번들링 또는 패키징할 수도 있습니다."/><meta data-rh="true" property="og:site_name" content="웹팩 한글문서"/><meta data-rh="true" property="og:type" content="website"/><meta data-rh="true" property="og:title" content="인쇄 가능한 페이지 | 웹팩"/><meta data-rh="true" property="og:description" name="description" content="웹팩은 모듈 번들러입니다. 주요 목적은 브라우저에서 사용할 수 있도록 JavaScript 파일을 번들로 묶는 것이지만, 리소스나 애셋을 변환하고 번들링 또는 패키징할 수도 있습니다."/><meta data-rh="true" property="og:image" content="https://webpack.js.org/icon-pwa-512x512.d3dae4189855b3a72ff9.png"/><meta data-rh="true" property="twitter:card" content="summary"/><meta data-rh="true" property="twitter:site" content="@webpack"/><meta data-rh="true" property="twitter:creator" content="@webpack"/><meta data-rh="true" property="twitter:domain" content="https://webpack.js.org/"/><meta data-rh="true" name="mobile-web-app-capable" content="yes"/><meta data-rh="true" name="apple-mobile-web-app-capable" content="yes"/><meta data-rh="true" name="apple-mobile-web-app-status-bar-style" content="black"/><meta data-rh="true" name="apple-mobile-web-app-title" content="webpack"/><meta data-rh="true" name="msapplication-TileImage" content="/icon_150x150.png"/><meta data-rh="true" name="msapplication-TileColor" content="#465e69"/><link data-rh="true" rel="icon" type="image/x-icon" href="/favicon.f326220248556af65f41.ico"/><link data-rh="true" rel="manifest" href="/manifest.json"/><link data-rh="true" rel="canonical" href="https://webpack.js.org/blog/printable/"/><link data-rh="true" rel="icon" sizes="192x192" href="/icon_192x192.png"/><link data-rh="true" rel="icon" sizes="512x512" href="/icon_512x512.png"/><link data-rh="true" rel="apple-touch-icon" href="/icon_180x180.png"/><link data-rh="true" rel="mask-icon" href="/logo-on-white-bg.47eff95f9c01c5972f6f.svg" color="#465e69"/><link rel="stylesheet" href=/index.0a439c6c70bc6322d1b1.css /><link rel="stylesheet" href=/9810.ecd65533ea4631309dd5.css /></head><body><div id="root"><div class="site"><div class="site__header"><header class="navigation   "><section class="navigation__inner"><button aria-label="Open menu" class="navigation__mobile"><svg viewBox="-62 138 25 25"><g><g><path d="M-60.2,140.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,141-61.2,140.2-60.2,140.2z"></path><path d="M-60.2,148.7h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,149.5-61.2,148.7-60.2,148.7z"></path><path d="M-60.2,157.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,158-61.2,157.2-60.2,157.2z"></path></g></g></svg></button><a class="navigation__logo" href="/"><img class="logo" src="/site-logo.1fcab817090e78435061.svg" alt="webpack logo"/></a><nav class="navigation__items"><a class="navigation__item  " href="/concepts/">Documentation</a><a class="navigation__item  " href="/contribute/">Contribute</a><a class="navigation__item  " href="/vote/">Vote</a><a class="navigation__item  navigation__item--active" href="/blog/">Blog</a><a href="https://github.com/webpack/webpack" target="_blank" rel="noopener noreferrer" title="GitHub Repository" class="navigation__item navigation__item--icon "><svg viewBox="0 0 24 24" aria-hidden="true" fill="#fff" width="16"><path d="M12 2A10 10 0 002 12a10 10 0 006.8 9.5c.5 0 .7-.2.7-.5v-1.7C6.7 20 6.1 18 6.1 18c-.4-1.2-1-1.5-1-1.5-1-.6 0-.6 0-.6 1 0 1.5 1 1.5 1 .9 1.6 2.4 1.1 3 .9 0-.7.3-1.1.6-1.4-2.2-.2-4.6-1-4.6-4.9 0-1.1.4-2 1-2.7 0-.3-.4-1.3.2-2.7 0 0 .8-.2 2.7 1a9.4 9.4 0 015 0c2-1.2 2.8-1 2.8-1 .5 1.4.1 2.4 0 2.7.7.7 1 1.6 1 2.7 0 3.8-2.3 4.7-4.5 5 .4.2.7.8.7 1.8V21c0 .3.2.6.7.5 4-1.3 6.8-5 6.8-9.5A10 10 0 0012 2z"></path></svg></a><a href="https://twitter.com/webpack" target="_blank" rel="noopener noreferrer" title="webpack on Twitter" class="navigation__item navigation__item--icon "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" aria-hidden="true" fill="#fff" width="16"><path d="M28 6.937c-.957.425-1.985.711-3.064.84a5.343 5.343 0 002.345-2.951 10.696 10.696 0 01-3.388 1.295 5.334 5.334 0 00-9.089 4.864A15.143 15.143 0 013.809 5.411a5.321 5.321 0 00-.721 2.683 5.33 5.33 0 002.372 4.439 5.323 5.323 0 01-2.416-.667v.067a5.335 5.335 0 004.279 5.23 5.336 5.336 0 01-2.409.092 5.34 5.34 0 004.983 3.705 10.699 10.699 0 01-6.625 2.284c-.43 0-.855-.025-1.273-.075a15.102 15.102 0 008.177 2.396c9.812 0 15.176-8.128 15.176-15.177 0-.231-.005-.461-.015-.69A10.855 10.855 0 0028 6.937z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener noreferrer" title="webpack on Stack Overflow" class="navigation__item navigation__item--icon "><svg viewBox="0 0 24 24" aria-hidden="true" fill="#fff" width="16"><path d="M17.4 20.2v-5.4h1.8V22H3v-7.2h1.8v5.4h12.6M6.8 14.3l.3-1.7 8.8 1.8-.3 1.8-8.8-1.9m1.1-4.2l.8-1.6 8.1 3.8-.7 1.6-8.2-3.8m2.3-4l1.1-1.4 7 5.8-1.2 1.4L10 6m4.7-4L20 9l-1.4 1-5.4-7 1.4-1m-8 16.5v-1.8h9v1.8h-9z"></path></svg></a><span class="navigation__item navigation__item--icon"><nav class="dropdown navigation__languages"><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><img class="dropdown__language" alt="select language" src="/language-icon.87a028c9bf555eeb5932.svg"/><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="https://webpack.js.org/blog/printable/"><span>English</span></a></li><li><a href="https://webpack.docschina.org/blog/printable/"><span lang="zh">中文</span></a></li><li><a href="https://webpack.kr/blog/printable/"><span lang="ko">한국어</span></a></li></ul></div></nav></span><span class="navigation__item navigation__item--icon"><button style="background:transparent;border:none;cursor:pointer">☀️</button></span></nav><div class="navigation-search "><input type="text" class="navigation-search__input" placeholder="Search this site..." value=""/><button aria-label="Hide search box" class="navigation-search__icon navigation-search__clear"><svg viewBox="-137 138 25 25"><g transform="translate(0,-952.36218)"><path d="M-131.3,1094.4c-0.4,0-0.9,0.1-1.2,0.5c-0.7,0.7-0.7,1.7,0,2.4l5.6,5.6l-5.6,5.6c-0.7,0.7-0.7,1.7,0,2.4 c0.7,0.7,1.7,0.7,2.4,0l5.6-5.6l5.6,5.6c0.7,0.7,1.7,0.7,2.4,0c0.7-0.7,0.7-1.7,0-2.4l-5.6-5.6l5.6-5.6c0.7-0.7,0.7-1.7,0-2.4 c-0.7-0.7-1.7-0.7-2.4,0l-5.6,5.6l-5.6-5.6C-130.5,1094.5-130.9,1094.4-131.3,1094.4L-131.3,1094.4z"></path></g></svg></button><button aria-label="Show search box" class="navigation-search__icon navigation-search__search"><svg viewBox="-137 138 25 25"><g><path d="M-114.6,162.6l-7.5-7.5c-0.6-0.6-0.6-1.6,0-2.1l0,0c0.6-0.6,1.6-0.6,2.1,0l7.5,7.5c0.6,0.6,0.6,1.6,0,2.1l0,0 C-113,163.1-114,163.1-114.6,162.6z"></path><path d="M-134.1,140.9c-3.9,3.9-3.9,10.2,0,14.1s10.2,3.9,14.1,0s3.9-10.2,0-14.1S-130.2,137-134.1,140.9z M-122.1,153 c-2.7,2.7-7.1,2.7-9.8,0s-2.7-7.1,0-9.8s7.1-2.7,9.8,0C-119.4,145.9-119.4,150.2-122.1,153z"></path></g></svg></button></div></section><div class="navigation-sub"><div class="navigation-sub__inner"></div></div></header></div><div class="container site__content"><div class="sponsors"><a href="https://www.ag-grid.com/?utm_source=webpack&amp;utm_medium=banner&amp;utm_campaign=sponsorship" target="_blank" rel="noopener noreferrer" class="sponsors__content"><img src="/ag-grid-logo.4fe9d34532b2c0821fc9.png"/><img class="sponsors__img__webpack" src="/icon-square-small.85ba630cf0c5f29ae3e3.svg"/><div class="sponsors__content-cont">ag-grid is proud to partner with webpack</div></a></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><div class="relative z-0 bg-white dark:bg-gray-100 "><select class="text-gray-600 text-14 px-5 py-5 appearance-none box-border border border-gray-200 border-solid flex-col flex w-full rounded-none bg-transparent bg-none"><option selected="" value="5">Webpack 5</option><option value="4">Webpack 4</option></select><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="absolute right-5 top-5 fill-current text-gray-300 z-[-1]" width="20" height="20"><path d="M4.5 7.5c.5-.4 1-.4 1.6 0l3.9 3.8 4-3.8c.4-.4 1-.4 1.5 0 .4.5.4 1.2 0 1.7l-4.7 4.5a1 1 0 01-1.6 0L4.5 9.2c-.4-.5-.4-1.2 0-1.7z"></path></svg></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="/blog/">Blog</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Popular posts"><a aria-current="page" class="active" href="/blog/#popular-posts">Popular posts</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="/blog/2020-12-08-roadmap-2021/">Roadmap 2021 (2020-12-08)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="What happened so far?"><a href="/blog/2020-12-08-roadmap-2021/#what-happened-so-far">What happened so far?</a></li><li class="sidebar-item__anchor" title="Roadmap 2021"><a href="/blog/2020-12-08-roadmap-2021/#roadmap-2021">Roadmap 2021</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Further stabilizing"><a href="/blog/2020-12-08-roadmap-2021/#further-stabilizing">Further stabilizing</a></li><li class="sidebar-item__anchor" title="EcmaScript Modules"><a href="/blog/2020-12-08-roadmap-2021/#ecmascript-modules">EcmaScript Modules</a></li><li class="sidebar-item__anchor" title="More first-class citizen"><a href="/blog/2020-12-08-roadmap-2021/#more-first-class-citizen">More first-class citizen</a></li><li class="sidebar-item__anchor" title="SourceMap performance"><a href="/blog/2020-12-08-roadmap-2021/#sourcemap-performance">SourceMap performance</a></li><li class="sidebar-item__anchor" title="exports/imports package.json field"><a href="/blog/2020-12-08-roadmap-2021/#exportsimports-packagejson-field">exports/imports package.json field</a></li><li class="sidebar-item__anchor" title="Improve CommonJS analysis"><a href="/blog/2020-12-08-roadmap-2021/#improve-commonjs-analysis">Improve CommonJS analysis</a></li><li class="sidebar-item__anchor" title="Hot Module Replacement for Module Federation"><a href="/blog/2020-12-08-roadmap-2021/#hot-module-replacement-for-module-federation">Hot Module Replacement for Module Federation</a></li><li class="sidebar-item__anchor" title="Hinting system"><a href="/blog/2020-12-08-roadmap-2021/#hinting-system">Hinting system</a></li><li class="sidebar-item__anchor" title="Multi-Threading"><a href="/blog/2020-12-08-roadmap-2021/#multi-threading">Multi-Threading</a></li><li class="sidebar-item__anchor" title="WebAssembly"><a href="/blog/2020-12-08-roadmap-2021/#webassembly">WebAssembly</a></li></ul></li><li class="sidebar-item__anchor" title="Disclaimer"><a href="/blog/2020-12-08-roadmap-2021/#disclaimer">Disclaimer</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="/blog/2020-10-10-webpack-5-release/">Webpack 5 release (2020-10-10)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Common Questions"><a href="/blog/2020-10-10-webpack-5-release/#common-questions">Common Questions</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="So what does the release mean?"><a href="/blog/2020-10-10-webpack-5-release/#so-what-does-the-release-mean">So what does the release mean?</a></li><li class="sidebar-item__anchor" title="So when is the time to upgrade?"><a href="/blog/2020-10-10-webpack-5-release/#so-when-is-the-time-to-upgrade">So when is the time to upgrade?</a></li></ul></li><li class="sidebar-item__anchor" title="Sponsoring Update"><a href="/blog/2020-10-10-webpack-5-release/#sponsoring-update">Sponsoring Update</a></li><li class="sidebar-item__anchor" title="General direction"><a href="/blog/2020-10-10-webpack-5-release/#general-direction">General direction</a></li><li class="sidebar-item__anchor" title="Migration Guide"><a href="/blog/2020-10-10-webpack-5-release/#migration-guide">Migration Guide</a></li><li class="sidebar-item__anchor" title="Major Changes: Removals"><a href="/blog/2020-10-10-webpack-5-release/#major-changes-removals">Major Changes: Removals</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Removed Deprecated Items"><a href="/blog/2020-10-10-webpack-5-release/#removed-deprecated-items">Removed Deprecated Items</a></li><li class="sidebar-item__anchor" title="Deprecation codes"><a href="/blog/2020-10-10-webpack-5-release/#deprecation-codes">Deprecation codes</a></li><li class="sidebar-item__anchor" title="Syntax deprecated"><a href="/blog/2020-10-10-webpack-5-release/#syntax-deprecated">Syntax deprecated</a></li><li class="sidebar-item__anchor" title="Automatic Node.js Polyfills Removed"><a href="/blog/2020-10-10-webpack-5-release/#automatic-nodejs-polyfills-removed">Automatic Node.js Polyfills Removed</a></li></ul></li><li class="sidebar-item__anchor" title="Major Changes: Long Term Caching"><a href="/blog/2020-10-10-webpack-5-release/#major-changes-long-term-caching">Major Changes: Long Term Caching</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Deterministic Chunk, Module IDs and Export names"><a href="/blog/2020-10-10-webpack-5-release/#deterministic-chunk-module-ids-and-export-names">Deterministic Chunk, Module IDs and Export names</a></li><li class="sidebar-item__anchor" title="Real Content Hash"><a href="/blog/2020-10-10-webpack-5-release/#real-content-hash">Real Content Hash</a></li></ul></li><li class="sidebar-item__anchor" title="Major Changes: Development Support"><a href="/blog/2020-10-10-webpack-5-release/#major-changes-development-support">Major Changes: Development Support</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Named Chunk IDs"><a href="/blog/2020-10-10-webpack-5-release/#named-chunk-ids">Named Chunk IDs</a></li><li class="sidebar-item__anchor" title="Module Federation"><a href="/blog/2020-10-10-webpack-5-release/#module-federation">Module Federation</a></li></ul></li><li class="sidebar-item__anchor" title="Major Changes: New Web Platform Features"><a href="/blog/2020-10-10-webpack-5-release/#major-changes-new-web-platform-features">Major Changes: New Web Platform Features</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="JSON modules"><a href="/blog/2020-10-10-webpack-5-release/#json-modules">JSON modules</a></li><li class="sidebar-item__anchor" title="import.meta"><a href="/blog/2020-10-10-webpack-5-release/#importmeta">import.meta</a></li><li class="sidebar-item__anchor" title="Asset modules"><a href="/blog/2020-10-10-webpack-5-release/#asset-modules">Asset modules</a></li><li class="sidebar-item__anchor" title="Native Worker support"><a href="/blog/2020-10-10-webpack-5-release/#native-worker-support">Native Worker support</a></li><li class="sidebar-item__anchor" title="URIs"><a href="/blog/2020-10-10-webpack-5-release/#uris">URIs</a></li><li class="sidebar-item__anchor" title="Async modules"><a href="/blog/2020-10-10-webpack-5-release/#async-modules">Async modules</a></li><li class="sidebar-item__anchor" title="Externals"><a href="/blog/2020-10-10-webpack-5-release/#externals">Externals</a></li></ul></li><li class="sidebar-item__anchor" title="Major Changes: New Node.js Ecosystem Features"><a href="/blog/2020-10-10-webpack-5-release/#major-changes-new-nodejs-ecosystem-features">Major Changes: New Node.js Ecosystem Features</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Resolving"><a href="/blog/2020-10-10-webpack-5-release/#resolving">Resolving</a></li></ul></li><li class="sidebar-item__anchor" title="Major Changes: Development Experience"><a href="/blog/2020-10-10-webpack-5-release/#major-changes-development-experience">Major Changes: Development Experience</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Improved target"><a href="/blog/2020-10-10-webpack-5-release/#improved-target">Improved target</a></li><li class="sidebar-item__anchor" title="Stats"><a href="/blog/2020-10-10-webpack-5-release/#stats">Stats</a></li><li class="sidebar-item__anchor" title="Progress"><a href="/blog/2020-10-10-webpack-5-release/#progress">Progress</a></li><li class="sidebar-item__anchor" title="Automatic unique naming"><a href="/blog/2020-10-10-webpack-5-release/#automatic-unique-naming">Automatic unique naming</a></li><li class="sidebar-item__anchor" title="Automatic public path"><a href="/blog/2020-10-10-webpack-5-release/#automatic-public-path">Automatic public path</a></li><li class="sidebar-item__anchor" title="Typescript typings"><a href="/blog/2020-10-10-webpack-5-release/#typescript-typings">Typescript typings</a></li></ul></li><li class="sidebar-item__anchor" title="Major Changes: Optimization"><a href="/blog/2020-10-10-webpack-5-release/#major-changes-optimization">Major Changes: Optimization</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Nested tree-shaking"><a href="/blog/2020-10-10-webpack-5-release/#nested-tree-shaking">Nested tree-shaking</a></li><li class="sidebar-item__anchor" title="Inner-module tree-shaking"><a href="/blog/2020-10-10-webpack-5-release/#inner-module-tree-shaking">Inner-module tree-shaking</a></li><li class="sidebar-item__anchor" title="CommonJs Tree Shaking"><a href="/blog/2020-10-10-webpack-5-release/#commonjs-tree-shaking">CommonJs Tree Shaking</a></li><li class="sidebar-item__anchor" title="Side-Effect analysis"><a href="/blog/2020-10-10-webpack-5-release/#side-effect-analysis">Side-Effect analysis</a></li><li class="sidebar-item__anchor" title="Optimization per runtime"><a href="/blog/2020-10-10-webpack-5-release/#optimization-per-runtime">Optimization per runtime</a></li><li class="sidebar-item__anchor" title="Module Concatenation"><a href="/blog/2020-10-10-webpack-5-release/#module-concatenation">Module Concatenation</a></li><li class="sidebar-item__anchor" title="General Tree Shaking improvements"><a href="/blog/2020-10-10-webpack-5-release/#general-tree-shaking-improvements">General Tree Shaking improvements</a></li><li class="sidebar-item__anchor" title="Development Production Similarity"><a href="/blog/2020-10-10-webpack-5-release/#development-production-similarity">Development Production Similarity</a></li><li class="sidebar-item__anchor" title="Improved Code Generation"><a href="/blog/2020-10-10-webpack-5-release/#improved-code-generation">Improved Code Generation</a></li><li class="sidebar-item__anchor" title="Improved target option"><a href="/blog/2020-10-10-webpack-5-release/#improved-target-option">Improved target option</a></li><li class="sidebar-item__anchor" title="SplitChunks and Module Sizes"><a href="/blog/2020-10-10-webpack-5-release/#splitchunks-and-module-sizes">SplitChunks and Module Sizes</a></li></ul></li><li class="sidebar-item__anchor" title="Major Changes: Performance"><a href="/blog/2020-10-10-webpack-5-release/#major-changes-performance">Major Changes: Performance</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Persistent Caching"><a href="/blog/2020-10-10-webpack-5-release/#persistent-caching">Persistent Caching</a></li><li class="sidebar-item__anchor" title="File Emitting"><a href="/blog/2020-10-10-webpack-5-release/#file-emitting">File Emitting</a></li></ul></li><li class="sidebar-item__anchor" title="Major Changes: Long outstanding problems"><a href="/blog/2020-10-10-webpack-5-release/#major-changes-long-outstanding-problems">Major Changes: Long outstanding problems</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Code Splitting for single-file-targets"><a href="/blog/2020-10-10-webpack-5-release/#code-splitting-for-single-file-targets">Code Splitting for single-file-targets</a></li><li class="sidebar-item__anchor" title="Updated Resolver"><a href="/blog/2020-10-10-webpack-5-release/#updated-resolver">Updated Resolver</a></li><li class="sidebar-item__anchor" title="Chunks without JS"><a href="/blog/2020-10-10-webpack-5-release/#chunks-without-js">Chunks without JS</a></li></ul></li><li class="sidebar-item__anchor" title="Major Changes: Future"><a href="/blog/2020-10-10-webpack-5-release/#major-changes-future">Major Changes: Future</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Experiments"><a href="/blog/2020-10-10-webpack-5-release/#experiments">Experiments</a></li><li class="sidebar-item__anchor" title="Minimum Node.js Version"><a href="/blog/2020-10-10-webpack-5-release/#minimum-nodejs-version">Minimum Node.js Version</a></li></ul></li><li class="sidebar-item__anchor" title="Changes to the Configuration"><a href="/blog/2020-10-10-webpack-5-release/#changes-to-the-configuration">Changes to the Configuration</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Changes to the Structure"><a href="/blog/2020-10-10-webpack-5-release/#changes-to-the-structure">Changes to the Structure</a></li><li class="sidebar-item__anchor" title="Changes to the Defaults"><a href="/blog/2020-10-10-webpack-5-release/#changes-to-the-defaults">Changes to the Defaults</a></li></ul></li><li class="sidebar-item__anchor" title="Loader related Changes"><a href="/blog/2020-10-10-webpack-5-release/#loader-related-changes">Loader related Changes</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="this.getOptions"><a href="/blog/2020-10-10-webpack-5-release/#thisgetoptions">this.getOptions</a></li><li class="sidebar-item__anchor" title="this.exec"><a href="/blog/2020-10-10-webpack-5-release/#thisexec">this.exec</a></li><li class="sidebar-item__anchor" title="this.getResolve"><a href="/blog/2020-10-10-webpack-5-release/#thisgetresolve">this.getResolve</a></li></ul></li><li class="sidebar-item__anchor" title="Major Internal Changes"><a href="/blog/2020-10-10-webpack-5-release/#major-internal-changes">Major Internal Changes</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="New plugin order"><a href="/blog/2020-10-10-webpack-5-release/#new-plugin-order">New plugin order</a></li><li class="sidebar-item__anchor" title="Runtime Modules"><a href="/blog/2020-10-10-webpack-5-release/#runtime-modules">Runtime Modules</a></li><li class="sidebar-item__anchor" title="Serialization"><a href="/blog/2020-10-10-webpack-5-release/#serialization">Serialization</a></li><li class="sidebar-item__anchor" title="Plugins for Caching"><a href="/blog/2020-10-10-webpack-5-release/#plugins-for-caching">Plugins for Caching</a></li><li class="sidebar-item__anchor" title="Hook Object Frozen"><a href="/blog/2020-10-10-webpack-5-release/#hook-object-frozen">Hook Object Frozen</a></li><li class="sidebar-item__anchor" title="Tapable Upgrade"><a href="/blog/2020-10-10-webpack-5-release/#tapable-upgrade">Tapable Upgrade</a></li><li class="sidebar-item__anchor" title="Staged Hooks"><a href="/blog/2020-10-10-webpack-5-release/#staged-hooks">Staged Hooks</a></li><li class="sidebar-item__anchor" title="Main/Chunk/ModuleTemplate deprecation"><a href="/blog/2020-10-10-webpack-5-release/#mainchunkmoduletemplate-deprecation">Main/Chunk/ModuleTemplate deprecation</a></li><li class="sidebar-item__anchor" title="Entry point descriptor"><a href="/blog/2020-10-10-webpack-5-release/#entry-point-descriptor">Entry point descriptor</a></li><li class="sidebar-item__anchor" title="Order and IDs"><a href="/blog/2020-10-10-webpack-5-release/#order-and-ids">Order and IDs</a></li><li class="sidebar-item__anchor" title="Arrays to Sets"><a href="/blog/2020-10-10-webpack-5-release/#arrays-to-sets">Arrays to Sets</a></li><li class="sidebar-item__anchor" title="Compilation.fileSystemInfo"><a href="/blog/2020-10-10-webpack-5-release/#compilationfilesysteminfo">Compilation.fileSystemInfo</a></li><li class="sidebar-item__anchor" title="Filesystems"><a href="/blog/2020-10-10-webpack-5-release/#filesystems">Filesystems</a></li><li class="sidebar-item__anchor" title="Hot Module Replacement"><a href="/blog/2020-10-10-webpack-5-release/#hot-module-replacement">Hot Module Replacement</a></li><li class="sidebar-item__anchor" title="Work Queues"><a href="/blog/2020-10-10-webpack-5-release/#work-queues">Work Queues</a></li><li class="sidebar-item__anchor" title="Logging"><a href="/blog/2020-10-10-webpack-5-release/#logging">Logging</a></li><li class="sidebar-item__anchor" title="Module and Chunk Graph"><a href="/blog/2020-10-10-webpack-5-release/#module-and-chunk-graph">Module and Chunk Graph</a></li><li class="sidebar-item__anchor" title="Init Fragments"><a href="/blog/2020-10-10-webpack-5-release/#init-fragments">Init Fragments</a></li><li class="sidebar-item__anchor" title="Module Source Types"><a href="/blog/2020-10-10-webpack-5-release/#module-source-types">Module Source Types</a></li><li class="sidebar-item__anchor" title="Plugins for Stats"><a href="/blog/2020-10-10-webpack-5-release/#plugins-for-stats">Plugins for Stats</a></li><li class="sidebar-item__anchor" title="New Watching"><a href="/blog/2020-10-10-webpack-5-release/#new-watching">New Watching</a></li><li class="sidebar-item__anchor" title="SizeOnlySource after emit"><a href="/blog/2020-10-10-webpack-5-release/#sizeonlysource-after-emit">SizeOnlySource after emit</a></li><li class="sidebar-item__anchor" title="Emitting assets multiple times"><a href="/blog/2020-10-10-webpack-5-release/#emitting-assets-multiple-times">Emitting assets multiple times</a></li><li class="sidebar-item__anchor" title="ExportsInfo"><a href="/blog/2020-10-10-webpack-5-release/#exportsinfo">ExportsInfo</a></li><li class="sidebar-item__anchor" title="Code Generation Phase"><a href="/blog/2020-10-10-webpack-5-release/#code-generation-phase">Code Generation Phase</a></li><li class="sidebar-item__anchor" title="DependencyReference"><a href="/blog/2020-10-10-webpack-5-release/#dependencyreference">DependencyReference</a></li><li class="sidebar-item__anchor" title="Presentational Dependencies"><a href="/blog/2020-10-10-webpack-5-release/#presentational-dependencies">Presentational Dependencies</a></li><li class="sidebar-item__anchor" title="Deprecated loaders"><a href="/blog/2020-10-10-webpack-5-release/#deprecated-loaders">Deprecated loaders</a></li></ul></li><li class="sidebar-item__anchor" title="Minor Changes"><a href="/blog/2020-10-10-webpack-5-release/#minor-changes">Minor Changes</a></li><li class="sidebar-item__anchor" title="Other Minor Changes"><a href="/blog/2020-10-10-webpack-5-release/#other-minor-changes">Other Minor Changes</a></li></ul></div></div></div></nav><section class="page"><div class="page-links"><a class="page-links__link" href="https://github.com/line/webpack.kr/edit/master/src/content/blog/printable.md">Edit Document<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="page-links__icon" width="12" fill="#1a6bac"><path d="M17.6 2.4C16 1 15 1.2 15 1.2l-6 6L2.2 14l-1 4.8 4.8-1 6.7-6.8 6-6s.3-1.1-1.1-2.6zm-12 14.8l-1.5.4-.7-1-1-.7.4-1.6.5-.4s.8 0 1.8 1 1 1.8 1 1.8l-.4.5z"></path></svg></a><span class="page-links__gap">|</span><button class="page-links__link page-links__print as-link" title="Print this page">Print Document<img src="/icon-print.42ad40feec51e6f5f553.svg" alt=""/></button></div><div class="markdown"><h1>Printable</h1><div><h1 id="roadmap-2021-2020-12-08">Roadmap 2021 (2020-12-08)<a href="#roadmap-2021-2020-12-08" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p>It has been nearly 2 months since webpack 5 was officially released. Due to the sponsoring situation, we couldn't devote as much time to webpack as we would like to. Speaking only for myself (@sokra), I enjoyed the little break and have worked on a few side projects. Ironically, while I was using webpack 5 and all its bleeding-edge features (asset modules, worker support, persistent caching), I discovered a few more bugs in webpack 5 that people are likely to run into when upgrading their projects to webpack 5, which led to a lot of work going into bug fixing. Here is a little summary:</p> <h2 id="what-happened-so-far">What happened so far?<a href="#what-happened-so-far" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>A few more things have been exposed from webpack, both typings-wise and runtime-wise. A few low-handling performance improvements have been made. Code without semicolons used to generate some invalid/incorrect code in some cases, which has been corrected. The combination of side-effect-free code + concatenated modules + reexports has led to some edge cases, which have been fixed (at least the known ones).</p> <p>But one bug reported by a user has led to the need for a completely new internal feature. You can skip it and go to the next chapter if you find webpack internals boring or too complex.</p> <p>To trigger the bug we need three ingredients:</p> <ul> <li>Since webpack 5 the optimization in <code>production</code> mode will run the used exports analysis (Tree Shaking) against each runtime (which is often identical to the entrypoints), which means webpack can optimize each runtime (resp. entrypoint) individually.</li> <li>A custom <code>optimization.splitChunks</code> configuration allows to forcefully merge modules into a single chunk. This is done by passing the <code>name</code> option. E.g. <code>{ test: /node_modules/, name: "vendors" }</code> merges modules from <code>node_modules</code> into a single chunk. While this is not recommended in general, it's possible and probably makes sense in some cases. The whole thing is about trade-offs anyway and choosing to merge all vendors into a single chunk can be good for long term caching this chunk for repeated visits or between multiple entrypoints.</li> <li>When exports of a side-effect-free module are not used, the whole module is omitted from the module graph and the <code>import</code>-statement generates no runtime code at all.</li> </ul> <p>A problem happens in an edge case where modules from two entrypoints are merged into a single chunk and they reference a side-effect-free module which is not in the shared chunk since only one of the entrypoints uses exports from the side-effect-free module. Modules in the shared chunk are used by both entrypoint, thus they need to include the exports that are used by any of the entrypoints. That means it will generate code referencing the side-effect-free module that is not available at runtime for the other entrypoint in the aforementioned edge case, which leads to an <code>undefined is not a function</code> or <code>cannot read property 'call' of undefined</code> error at runtime.</p> <p>A potential fix would be to include the side-effect-free module in all entrypoints, but as this module isn't really needed, that would be a waste of bundle size. So we went another route, which required the development of a new feature: <code>runtime-dependent code generation</code>. This allows to generate code which behaves differently depending on which runtime it executes.</p> <p>To put it another way, we are wrapping some generated code in <code>if</code>-blocks, so they only execute in one runtime. In this example, this would affect the <code>import</code>-statement which references the side-effect-free module. The import is only executed for one of the entrypoints. This avoids to include unnecessary modules, and it also avoids executing unnecessary code even if it would be available. So even if you are merging all code into a single chunk, only the code that is really used is executed.</p> <p>So far for the excurse, I hope it wasn't that boring...</p> <h2 id="roadmap-2021">Roadmap 2021<a href="#roadmap-2021" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>So assuming we can sort out our sponsoring situation, the following is planned for 2021:</p> <h3 id="further-stabilizing">Further stabilizing<a href="#further-stabilizing" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Our top-priority stays stabilizing webpack 5. So far the situation looks pretty good. Most critical bugs reported in the last time, affect some edge cases. So I guess webpack 5 should work for the general cases. But handling edge cases is (and should stay) one of webpack strength, so we want to continue to work hard fixing these. We think that many many webpack users need custom things for their build and that's something webpack offers via configurability and its rich plugin system.</p> <h3 id="ecmascript-modules">EcmaScript Modules<a href="#ecmascript-modules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>EcmaScript Modules (ESM) are slowly gaining wide-spread adoption. On authoring side they are already the de facto standard to write code. On browser support it also looks pretty ok (except for IE11 and a few older mobile browsers). Browsers are still a bit lacking in supporting ESM for WebWorkers.</p> <p>One can also generate bundles that run in a <code>type=module</code> script tag, but that has few benefits currently.</p> <p>There are multiple areas in webpack where ESM support can be improved:</p> <h4 id="esm-as-chunk-loading-mechanism">ESM as chunk loading mechanism<a href="#esm-as-chunk-loading-mechanism" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>When targeting the web webpack loads chunks via <code>script</code> tags. When targeting node.js webpack loads chunks via <code>require</code> or <code>fs</code> + <code>vm</code>. When targeting WebWorkers webpack loads chunk via <code>importScripts</code>.</p> <p>In a not-so-far future, all these environments support ESM and more importantly the dynamic <code>import()</code> function. So a chunk loading mechanism based on <code>import()</code> can unify all these environments, while even needing less runtime code.</p> <h4 id="self-executed-chunks">Self-executed chunks<a href="#self-executed-chunks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Currently on-demand-loaded chunks in webpack are always containers for module and never execute module code directly. When writing <code>import("./module")</code> in modules, this will compile to something like <code>__webpack_load_chunk__("chunk-containing-module.js").then(() => __webpack_require__("./module"))</code>. There are many cases where this can't be changed (e.g. when loading multiple chunks or loading CSS too), but there are some cases where webpack could generate a chunk that directly executes the contained module. This could lead to less generated code and would avoid the function wrapping in the chunk.</p> <p>Currently I'm not yet sure if this is worth it, but it's at least worth looking into that.</p> <h4 id="esm-exports">ESM exports<a href="#esm-exports" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Currently it's not possible to generate ESM exports for a bundle via <code>output.library.type: "module"</code>. This can be useful when integrating webpack bundles into ESM loading environments or inline scripts.</p> <aside class="tip"><h6 class="tip__prefix">tip</h6><p>For webpack 4 there is actually a plugin, but native support would be preferable.</p></aside> <h4 id="esm-externals-import">ESM externals (import)<a href="#esm-externals-import" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Webpack allows to define <code>externals</code> which are modules that are not bundled but exist at runtime. There are many types of externals ranging from globals over CommonJs/AMD/System to loading from classic script tag. Even <code>import()</code> (<code>type: "import"</code>) can be used to load an external, but <code>import</code> (<code>type: "module"</code>) can't be used yet.</p> <p>Interestingly even while <code>type: "module"</code> isn't supported yet, webpack already uses it as default when writing e.g. <code>import x from "https://example.com/module.js"</code>. The default has been choosing to seamlessly add support for ESM externals without introducing a breaking change.</p> <p>Absolute URLs in <code>import</code>s can make sense e.g. when using external services that offer their API as ESM: <code>import { event } from "https://analytics.company.com/api/v1.js"</code> (<code>import("https://analytics.company.com/api/v1.js")</code> might make more sense to gracefully handle errors when depending on this external service, but errors could also be caught higher in module graph).</p> <p>As usual the <code>externals</code> configuration allows to map any module name to externals:</p> <pre><code class="hljs language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  externalsType<span class="token operator">:</span> <span class="token string">'module'</span><span class="token punctuation">,</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    analytics<span class="token operator">:</span> <span class="token string">'https://analytics.company.com/api/v1.js'</span><span class="token punctuation">,</span>
    svelte<span class="token operator">:</span> <span class="token string">'https://jspm.dev/svelte@3'</span><span class="token punctuation">,</span>
    react<span class="token operator">:</span> <span class="token string">'https://cdn.skypack.dev/preact@10'</span><span class="token punctuation">,</span>
    <span class="token string">'react-dom'</span><span class="token operator">:</span> <span class="token string">'https://esm.sh/[react,react-dom]/react-dom'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <aside class="warning"><h6 class="warning__prefix">warning</h6><p>Using multiple different ESM CDNs will not work. This is only an example.</p></aside> <h4 id="esm-library">ESM library<a href="#esm-library" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>When ESM exports and import are supported people might think bundling a library makes sense, and that's probably true in some cases, but in many cases natively bundling will result in worse results. The biggest problem is the <code>"sideEffects": false</code> flag. It affects modules on per file base to skip whole modules. When concatenating multiple side-effect-free modules it's no longer possible to skip the individual modules, which leads to worse optimization when not all exports of the library are used.</p> <p>When the output should be a library that will be processed by a bundler later, this needs to be considered.</p> <p>I could think of a special mode, which does not apply chunking and instead, emit the raw (processed) modules connected via ESM imports and exports (or also CommonJS <code>require</code>). So this means loaders, module graph, and asset optimizations run, but no chunk graph is created and each module in the module graph is emitted as a separate file.</p> <h4 id="strict-mode-warnings">Strict mode warnings<a href="#strict-mode-warnings" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>When generating an ESM bundle, all contained code will be forced to strict mode. For many modules, this isn't an issue, but there are a few older packages that might have trouble with the different semantic. We want to show warnings for these cases.</p> <h3 id="more-first-class-citizen">More first-class citizen<a href="#more-first-class-citizen" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>webpack 4 and 5 did a lot of work to support non-JS module types, and webpack 5 already supports some module types by default: JS (ESM/CJS/AMD), JSON, WebAssembly, Asset. Since webpack 5 one of our long term goals is to become a web-app optimizer, with the goal of supporting everything the browser supports. So technically a vanilla web app should work out-of-the-box with webpack, but being optimized on the go.</p> <p>The initial webpack 5 release already did some major steps in this direction: <code>new Worker</code> is supported natively. <code>new URL(...)</code> is supported natively (assets).</p> <p>WebAssembly and JSON is already supported, even while the proposals are not finished yet.</p> <p>But two resource types are still missing for the complete story: HTML and CSS.</p> <h4 id="css-as-modules">CSS as modules<a href="#css-as-modules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Currently webpack supports CSS via <code>css-loader</code>, <code>style-loader</code> or <code>mini-css-extract-plugin</code>. This is working pretty well, but I think we can do more by supporting CSS as a native module type in webpack.</p> <p>A major benefit would be the developer experience: The <code>mini-css-extract-plugin</code> configuration is not the easiest and getting rid of it would simplify a lot for the developer. That doesn't mean you can add additional customization on top of that. I see many developers not using raw CSS, but using preprocessors on top of that (with native CSS support this would look like that: <code>{ test: /\.sass$/, type: "stylesheet", use: "sass-loader" }</code>).</p> <p>As of <a href="https://2020.stateofcss.com/en-US/technologies/css-in-js/">State of CSS 2020</a> CSS Modules is a popular way of writing modular CSS and it being a native module type in webpack allows to benefit from module graph optimization like Tree Shaking (Used Exports Optimization and Side-Effects optimization). When using CSS Modules this means the resulting CSS will only contain CSS rules that are referenced from the application (as one is used to from JS Tree Shaking).</p> <p>There are some potential CSS Modules specific optimizations which are possible with the global knowledge of the application webpack has: CSS rules can be split into smaller rules to avoid repeating common properties. This can result in a much smaller payload as the output CSS contains fewer repeated properties (Atomic CSS).</p> <p>But there is a big "BUT" here: There is work towards a different "CSS Modules" proposal in the WebComponents community, which is planned to become natively supported by browsers. At least that's the goal of the proposal. Sadly this proposal is different from what's currently used in the Frontend ecosystem but uses similar syntax. Usually, webpack would align with proposals, so that's something to consider here. We have to check whether it's possible to avoid potential conflicts.</p> <h4 id="html-as-entrypoint">HTML as entrypoint<a href="#html-as-entrypoint" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Following Parcels example, we also want to support HTML natively as entrypoints. Supporting that would be inline with the goal as web app optimizer, as web apps unusally start with a HTML. It is also a huge developer experience improvement for beginners as many things can be inferred from the HTML.</p> <p>Being in control of the generated HTML does also allow to optimize more aggressively by default. Currently, we prevent renaming or splitting initial chunks by default, as this requires additional infrastructure for the HTML generation.</p> <p>HTML entrypoints also benefit from CSS as modules and Asset modules, as these resources can be referenced from HTML too (e.g. <code>&#x3C;link rel=stylesheet /></code>, <code>&#x3C;img src="..." /></code>, <code>&#x3C;link rel=icon /></code>).</p> <h4 id="html-modules">HTML modules<a href="#html-modules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>There is also a proposal about native support of importing HTML in browsers, that's something we will follow, especially as there is a huge overlap with HTML entrypoints.</p> <h3 id="sourcemap-performance">SourceMap performance<a href="#sourcemap-performance" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Using (full) SourceMaps with webpack is currently quite expensive with webpack, as performance for SourceMap processing isn't the best. This is something we want to look into for webpack, but also for terser, which is used by webpack as minimizer by default.</p> <h3 id="exportsimports-packagejson-field"><code>exports</code>/<code>imports</code> package.json field<a href="#exportsimports-packagejson-field" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Node.js 14 has added support for the <code>exports</code> field in package.json to allow to define entrypoints of a package. Webpack 5 followed this, and even added additional conditions like <code>production/development</code>.</p> <p>Shortly after that Node.js made further additionals to that, e.g. they also added an <code>imports</code> field for private imports.</p> <p>That's something we also want to add.</p> <h3 id="improve-commonjs-analysis">Improve CommonJS analysis<a href="#improve-commonjs-analysis" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>While ESM is the future, there are still a lot of CommonJS packages in npm and in use. Webpack 5 added analysis for CommonJS modules to allow Tree Shaking for most of these modules.</p> <p>But we can do more. While many exporting patterns are supported, only a few importing patterns are supported. We want to add support for more patterns to allow more optimizations for CommonJS modules too.</p> <h3 id="hot-module-replacement-for-module-federation">Hot Module Replacement for Module Federation<a href="#hot-module-replacement-for-module-federation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Webpack 5 added a new feature called "Module Federation" which allows integrating multiple builds together at runtime. Currently, Hot Module Replacement (HMR) supports only a single build at a time and updates can't bubble between builds. We want to improve here and allow HMR updates to bubble between different builds, which would improve developing federation applications.</p> <h3 id="hinting-system">Hinting system<a href="#hinting-system" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Currently, webpack displays warnings and errors to the user. During the build, there are quite a few cases where we could tell the user something, like potential footguns or optimization opportunities, but they don't fit into warnings or errors and we don't want to spam the output with all this information. So we want to add another category: Hints. We want to collect all hints during builds (plugins could also emit some), but only display a limited number of them in the output (by default only one). This should lead to some kind of "Did you know" experience for the user.</p> <h3 id="multi-threading">Multi-Threading<a href="#multi-threading" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>While Persistent Caching makes cached build "blazing" fast, initial builds without Persistent Cache have still a bit of room for improvement. Javascript execution in Node.js is single-threaded by default, but recent additions allow to use <code>worker_threads</code>, which is an API similar to WebWorkers.</p> <p>This can be used distribute work across all CPUs. There has already been some preparations in webpack 5 for that: e.g. serializing of internal data structures is possible and the work queues support plugins. But some parts of that are still unclear and require experimentation.</p> <p>This is in our voting list for a while, but not many have voted on that. Is this really something people need?</p> <h3 id="webassembly">WebAssembly<a href="#webassembly" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Currently, WebAssembly is experimental and not enabled by default. Once the proposal reaches Stage 4 we can enable it by default.</p> <p>This might also lead to a wider adoption of WebAssembly in the ecosystem. I think we might see more in this field in 2021.</p> <h2 id="disclaimer">Disclaimer<a href="#disclaimer" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>This list is not set in stone. The web ecosystem changes so fast that we probably end up implementing totally different things, that we might not even aware of at this time. We do not even know how much time we can invest in webpack, considering our current sponsoring situation.</p> <h1 id="webpack-5-release-2020-10-10">Webpack 5 release (2020-10-10)<a href="#webpack-5-release-2020-10-10" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p>webpack 4 was released in February 2018. Since then we shipped a lot of features without breaking changes. We know that people dislike major changes with breaking changes. Especially with webpack, which people usually only touch twice a year, and the remaining time it "just works". But shipping features without breaking changes also has a cost: We can't do major API or architectural improvements.</p> <p>So from time to time, there is a point where the difficulties pile up and we are forced to do breaking changes to not mess everything up. That's the time for a new major version. So webpack 5 contains these architectural improvements and the features that were not possible to implement without them.</p> <p>The major version was also the chance to revise some of the defaults and to align with proposals and specifications that come up in the meantime.</p> <p>So today (2020-10-10) webpack 5.0.0 is released, but this doesn't mean it's done, bugfree or even feature-complete. As with webpack 4 we continue development by fixing problems and adding features. In the next days there will probably be a lot bugfixes. Features will come later.</p> <h2 id="common-questions">Common Questions<a href="#common-questions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="so-what-does-the-release-mean">So what does the release mean?<a href="#so-what-does-the-release-mean" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>It means we finished doing breaking changes. Many refactorings have been done to up-level the architecture and create a good base for future features (and current features).</p> <h3 id="so-when-is-the-time-to-upgrade">So when is the time to upgrade?<a href="#so-when-is-the-time-to-upgrade" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>It depends. There is a good chance that upgrading fails and you would need to give it a second or 3rd try. If you are open to that, try to upgrade now and provide feedback to webpack, plugins and loaders. We are eager to fix those problems. Someone has to start and you would be one of the first ones benefiting from it.</p> <h2 id="sponsoring-update">Sponsoring Update<a href="#sponsoring-update" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>webpack is fully based upon <a href="https://opencollective.com/webpack">sponsoring</a>. It's not tied to (and paid by) a big company like some other Open Source projects. 99% of the earnings from sponsoring are distributed towards contributors and maintainers based on the contributions they do. We believe in investing the money towards making webpack better.</p> <p>But there is a pandemic, and companies ain't that much open to sponsoring anymore. Webpack is suffering under these circumstances too (like many other companies and people).</p> <p>We were never able to pay our contributors the amount we think they deserve, but now we only have half of the money available, so we need to make a more serious cut. Until the situation improves we will only pay contributors and maintainers the first 10 days of each month. The remaining days they could work voluntarily, paid by their employer, work on something else, or take some days off. This allows us to pay for their work in the first 10 days more equivalent to the invested time.</p> <p>The biggest "Thank You" goes to <a href="https://tech.trivago.com/opensource">trivago</a> which has been sponsoring webpack a huge amount for the last 3 years. Sadly they are unable to continue their sponsorship this year, as they have been hit hard by Covid-19. I hope some other company steps up and follows these (gigantic) footsteps.</p> <p>Thanks to <a href="https://webpack.js.org/#sponsors">all the sponsors</a>.</p> <h2 id="general-direction">General direction<a href="#general-direction" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>This release focus on the following:</p> <ul> <li>Improve build performance with Persistent Caching.</li> <li>Improve Long Term Caching with better algorithms and defaults.</li> <li>Improve bundle size with better Tree Shaking and Code Generation.</li> <li>Improve compatibility with the web platform.</li> <li>Clean up internal structures that were left in a weird state while implementing features in v4 without introducing any breaking changes.</li> <li>Prepare for future features by introducing breaking changes now, allowing us to stay on v5 for as long as possible.</li> </ul> <h2 id="migration-guide"><strong>Migration</strong> Guide<a href="#migration-guide" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><a href="/migrate/5">See here for a <strong>migration</strong> guide</a></p> <h2 id="major-changes-removals">Major Changes: Removals<a href="#major-changes-removals" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="removed-deprecated-items">Removed Deprecated Items<a href="#removed-deprecated-items" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>All items deprecated in v4 were removed.</p> <p><strong>MIGRATION</strong>: Make sure that your webpack 4 build does not print deprecation warnings.</p> <p>Here are a few things that were removed but did not have deprecation warnings in v4:</p> <ul> <li>IgnorePlugin and BannerPlugin must now be passed only one argument that can be an object, string or function.</li> </ul> <h3 id="deprecation-codes">Deprecation codes<a href="#deprecation-codes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>New deprecations include a deprecation code so they are easier to reference.</p> <h3 id="syntax-deprecated">Syntax deprecated<a href="#syntax-deprecated" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>require.include</code> has been deprecated and will emit a warning by default when used.</p> <p>Behavior can be changed with <code>Rule.parser.requireInclude</code> to allowed, deprecated or disabled.</p> <h3 id="automatic-nodejs-polyfills-removed">Automatic Node.js Polyfills Removed<a href="#automatic-nodejs-polyfills-removed" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>In the early days, webpack's aim was to allow running most Node.js modules in the browser, but the module landscape changed and many module uses are now written mainly for frontend purposes. webpack &#x3C;= 4 ships with polyfills for many of the Node.js core modules, which are automatically applied once a module uses any of the core modules (i.e. the <code>crypto</code> module).</p> <p>While this makes using modules written for Node.js easier, it adds these huge polyfills to the bundle. In many cases these polyfills are unnecessary.</p> <p>webpack 5 stops automatically polyfilling these core modules and focus on frontend-compatible modules. Our goal is to improve compatibility with the web platform, where Node.js core modules are not available.</p> <p><strong>MIGRATION</strong>:</p> <ul> <li>Try to use frontend-compatible modules whenever possible.</li> <li>It's possible to manually add a polyfill for a Node.js core module. An error message will give a hint on how to achieve that.</li> <li>Package authors: Use the <code>browser</code> field in <code>package.json</code> to make a package frontend-compatible. Provide alternative implementations/dependencies for the browser.</li> </ul> <h2 id="major-changes-long-term-caching">Major Changes: Long Term Caching<a href="#major-changes-long-term-caching" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="deterministic-chunk-module-ids-and-export-names">Deterministic Chunk, Module IDs and Export names<a href="#deterministic-chunk-module-ids-and-export-names" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>New algorithms were added for long term caching. These are enabled by default in production mode.</p> <p><code>chunkIds: "deterministic"</code> <code>moduleIds: "deterministic"</code> <code>mangleExports: "deterministic"</code></p> <p>The algorithms assign short (3 or 5 digits) numeric IDs to modules and chunks and short (2 characters) names to exports in a deterministic way. This is a trade-off between bundle size and long term caching.</p> <p><code>moduleIds/chunkIds/mangleExports: false</code> disables the default behavior and one can provide a custom algorithm via plugin. Note that in webpack 4 <code>moduleIds/chunkIds: false</code> without custom plugin resulted in a working build, while in webpack 5 you must provide a custom plugin.</p> <p><strong>MIGRATION</strong>: Best use the default values for <code>chunkIds</code>, <code>moduleIds</code> and <code>mangleExports</code>. You can also opt-in to the old defaults <code>chunkIds: "size", moduleIds: "size", mangleExports: "size"</code>, this will generate smaller bundles, but invalidate them more often for caching.</p> <p>Note: In webpack 4 hashed module ids yielded reduced gzip performance. This was related to changed module order and has been fixed.</p> <p>Note: In webpack 5, <code>deterministic</code> Ids are enabled by default in production mode</p> <h3 id="real-content-hash">Real Content Hash<a href="#real-content-hash" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Webpack 5 will use a real hash of the file content when using <code>[contenthash]</code> now. Before it "only" used a hash of the internal structure. This can be positive impact on long term caching when only comments are changed or variables are renamed. These changes are not visible after minimizing.</p> <h2 id="major-changes-development-support">Major Changes: Development Support<a href="#major-changes-development-support" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="named-chunk-ids">Named Chunk IDs<a href="#named-chunk-ids" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>A new named chunk id algorithm enabled by default in development mode gives chunks (and filenames) human-readable names. A Module ID is determined by its path, relative to the <code>context</code>. A Chunk ID is determined by the chunk's content.</p> <p>So you no longer need to use <code>import(/* webpackChunkName: "name" */ "module")</code> for debugging. But it would still make sense if you want to control the filenames for production environments.</p> <p>It's possible to use <code>chunkIds: "named"</code> in production, but make sure not to accidentally expose sensitive information about module names.</p> <p><strong>MIGRATION</strong>: If you dislike the filenames being changed in development, you can pass <code>chunkIds: "natural"</code> to use the old numeric mode.</p> <h3 id="module-federation">Module Federation<a href="#module-federation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Webpack 5 adds a new feature called "Module Federation", which allows multiple webpack builds to work together. From runtime perspective modules from multiple builds will behave like a huge connected module graph. From developer perspective modules can be imported from specified remote builds and used with minimal restrictions.</p> <p>For more details see <a href="/concepts/module-federation">this separate guide</a>.</p> <h2 id="major-changes-new-web-platform-features">Major Changes: New Web Platform Features<a href="#major-changes-new-web-platform-features" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="json-modules">JSON modules<a href="#json-modules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>JSON modules now align with the proposal and emit a warning when a non-default export is used. JSON modules no longer have named exports when importing from a strict ECMAScript module.</p> <p><strong>MIGRATION</strong>: Use the default export.</p> <p>Even when using the default export, unused properties are dropped by the <code>optimization.usedExports</code> optimization and properties are mangled by the <code>optimization.mangleExports</code> optimization.</p> <p>It's possible to specify a custom JSON parser in <code>Rule.parser.parse</code> to import JSON-like files (e.g. for toml, yaml, json5, etc.).</p> <h3 id="importmeta">import.meta<a href="#importmeta" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <ul> <li><code>import.meta.webpackHot</code> is an alias for <code>module.hot</code> which is also available in strict ESM</li> <li><code>import.meta.webpack</code> is the webpack major version as number</li> <li><code>import.meta.url</code> is the <code>file:</code> url of the current file (similar to <code>__filename</code> but as file url)</li> </ul> <h3 id="asset-modules">Asset modules<a href="#asset-modules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Webpack 5 has now native support for modules representing assets. These modules will either emit a file into the output folder or inject a DataURI into the javascript bundle. Either way they give a URL to work with.</p> <p>They can be used via multiple ways:</p> <ul> <li><code>import url from "./image.png"</code> and setting <code>type: "asset"</code> in <code>module.rules</code> when matching such import. (old way)</li> <li><code>new URL("./image.png", import.meta.url)</code> (new way)</li> </ul> <p>The "new way" syntax was chosen to allow running code without bundler too. This syntax is also available in native ECMAScript modules in the browser.</p> <h3 id="native-worker-support">Native Worker support<a href="#native-worker-support" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>When combining <code>new URL</code> for assets with <code>new Worker</code>/<code>new SharedWorker</code>/<code>navigator.serviceWorker.register</code> webpack will automatically create a new entrypoint for a web worker.</p> <p><code>new Worker(new URL("./worker.js", import.meta.url))</code></p> <p>The syntax was chosen to allow running code without bundler too. This syntax is also available in native ECMAScript modules in the browser.</p> <h3 id="uris">URIs<a href="#uris" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Webpack 5 supports handling of protocols in requests.</p> <ul> <li><code>data:</code> is supported. Base64 or raw encoding is supported. Mimetype can be mapped to loaders and module type in <code>module.rules</code>. Example: <code>import x from "data:text/javascript,export default 42"</code></li> <li><code>file:</code> is supported.</li> <li><code>http(s):</code> is supported, but requires opt-in via <code>new webpack.experiments.schemesHttp(s)UriPlugin()</code> <ul> <li>By default when targeting "web", these URIs result in requests to external resource (they are externals)</li> </ul> </li> </ul> <p>Fragments in requests are supported: Example: <code>./file.js#fragment</code></p> <h3 id="async-modules">Async modules<a href="#async-modules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Webpack 5 supports so called "async modules". That are modules that do not evaluate synchronously, but are async and Promise-based instead.</p> <p>Importing them via <code>import</code> is automatically handled and no additional syntax is needed and difference is hardly notice-able.</p> <p>Importing them via <code>require()</code> will return a Promise that resolves to the exports.</p> <p>In webpack there are multiple ways to have async modules:</p> <ul> <li>async externals</li> <li>WebAssembly Modules in the new spec</li> <li>ECMAScript Modules that are using Top-Level-Await</li> </ul> <h3 id="externals">Externals<a href="#externals" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Webpack 5 adds additional external types to cover more applications:</p> <p><code>promise</code>: An expression that evaluates to a Promise. The external module is an async module and the resolved value is used as module exports.</p> <p><code>import</code>: Native <code>import()</code> is used to load the specified request. The external module is an async module.</p> <p><code>module</code>: Not implemented yet, but planned to load modules via <code>import x from "..."</code>.</p> <p><code>script</code>: Loads a url via <code>&#x3C;script></code> tag and gets the exports from a global variable (and optionally properties of it). The external module is an async module.</p> <h2 id="major-changes-new-nodejs-ecosystem-features">Major Changes: New Node.js Ecosystem Features<a href="#major-changes-new-nodejs-ecosystem-features" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="resolving">Resolving<a href="#resolving" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The <code>exports</code> and <code>imports</code> field in package.json is now supported.</p> <p>Yarn PnP is supported natively.</p> <p>See more details in <a href="/guides/package-exports/">package exports</a>.</p> <h2 id="major-changes-development-experience">Major Changes: Development Experience<a href="#major-changes-development-experience" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="improved-target">Improved target<a href="#improved-target" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Webpack 5 allows to pass a list of targets and also support versions of target.</p> <p>Examples: <code>target: "node14"</code> <code>target: ["web", "es2020"]</code></p> <p>This enables us to provide webpack all the information it needs to determine:</p> <ul> <li>chunk loading mechanism, and</li> <li>supported syntax like arrow functions</li> </ul> <h3 id="stats">Stats<a href="#stats" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The Stats test format has been improved regarding readability and verbosity. The defaults have been improved to be less verbose and also suitable for large builds.</p> <ul> <li>Chunk relations are hidden by default now. This can be toggled with <code>stats.chunkRelations</code>.</li> <li>Stats differentiate between <code>files</code> and <code>auxiliaryFiles</code> now.</li> <li>Stats hide module and chunk ids by default now. This can be toggled with <code>stats.ids</code>.</li> <li>The list of all modules is sorted by distance to entrypoint now. This can be changed with <code>stats.modulesSort</code>.</li> <li>The list of chunk modules is sorted by module name now. This can be changed with <code>stats.chunkModulesSort</code>.</li> <li>The list of nested modules in concatenated modules is sorted topologically now. This can be changed with <code>stats.nestedModulesSort</code>.</li> <li>Chunks and Assets show chunk id hints now.</li> <li>Assets and modules will display in a tree instead of a list/table.</li> <li>General information is shown in a summary at the end now. It shows webpack version, config name and warnings/errors count.</li> <li>Hash is hidden by default now. This can be changed with <code>stats.hash</code>.</li> <li>Timestamp of build is no longer shown by default. This can be enabled with <code>stats.builtAt</code>. It will show the timestamp in the summary.</li> <li>Child compilations will no longer shown by default. They can be displayed with <code>stats.children</code>.</li> </ul> <h3 id="progress">Progress<a href="#progress" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>A few improvements have been done to the <code>ProgressPlugin</code> which is used for <code>--progress</code> by the CLI, but can also be used manually as plugin.</p> <p>It used to only count the processed modules. Now it can count <code>entries</code> <code>dependencies</code> and <code>modules</code>. All of them are shown by default now.</p> <p>It used to display the currently processed module. This caused much stderr output and yielded a performance problem on some consoles. This is now disabled by default (<code>activeModules</code> option). This also reduces the amount of spam on the console. Now writing to stderr during building modules is throttled to 500ms.</p> <p>The profiling mode also got an upgrade and will display timings of nested progress messages. This makes it easier to figure out which plugin is causing performance problems.</p> <p>A newly added <code>percentBy</code>-option tells <code>ProgressPlugin</code> how to calculate progress percentage.</p> <pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProgressPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> percentBy<span class="token operator">:</span> <span class="token string">'entries'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>To make progress percentage more accurate <code>ProgressPlugin</code> caches the last known total modules count and reuses this value on the next build. The first build will warm the cache but the following builds will use and update this value.</p> <h3 id="automatic-unique-naming">Automatic unique naming<a href="#automatic-unique-naming" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>In webpack 4 multiple webpack runtimes could conflict on the same HTML page, because they use the same global variable for chunk loading. To fix that it was needed to provide a custom name to the <code>output.jsonpFunction</code> configuration.</p> <p>Webpack 5 does automatically infer a unique name for the build from <code>package.json</code> <code>name</code> and uses this as default for <code>output.uniqueName</code>.</p> <p>This value is used to make all potential conflicting globals unique.</p> <p><strong>MIGRATION</strong>: Remove <code>output.jsonpFunction</code> in favor of a unique name in your <code>package.json</code>.</p> <h3 id="automatic-public-path">Automatic public path<a href="#automatic-public-path" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Webpack 5 will determine the <code>output.publicPath</code> automatically when possible.</p> <h3 id="typescript-typings">Typescript typings<a href="#typescript-typings" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Webpack 5 generates typescript typings from source code and exposes them via the npm package.</p> <p><strong>MIGRATION</strong>: Remove <code>@types/webpack</code>. Update references when names differ.</p> <h2 id="major-changes-optimization">Major Changes: Optimization<a href="#major-changes-optimization" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="nested-tree-shaking">Nested tree-shaking<a href="#nested-tree-shaking" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>webpack is now able to track access to nested properties of exports. This can improve Tree Shaking (Unused export elimination and export mangling) when reexporting namespace objects.</p> <pre><code class="hljs language-js"><span class="token comment">// inner.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">// module.js</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">as</span> inner <span class="token keyword">from</span> <span class="token string">'./inner'</span><span class="token punctuation">;</span>
<span class="token comment">// or import * as inner from './inner'; export { inner };</span>

<span class="token comment">// user.js</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> module <span class="token keyword">from</span> <span class="token string">'./module'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>inner<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>In this example, the export <code>b</code> can be removed in production mode.</p> <h3 id="inner-module-tree-shaking">Inner-module tree-shaking<a href="#inner-module-tree-shaking" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>webpack 4 didn't analyze dependencies between exports and imports of a module. webpack 5 has a new option <code>optimization.innerGraph</code>, which is enabled by default in production mode, that runs an analysis on symbols in a module to figure out dependencies from exports to imports.</p> <p>In a module like this:</p> <pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> something <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./something'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">usingSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> something<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">usingSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> <p>The inner graph algorithm will figure out that <code>something</code> is only used when the <code>test</code> export is used. This allows to flag more exports as unused and to omit more code from the bundle.</p> <p>When <code>"sideEffects": false</code> is set, this allows to omit even more modules. In this example <code>./something</code> will be omitted when the <code>test</code> export is unused.</p> <p>To get the information about unused exports <code>optimization.unusedExports</code> is required. To remove side-effect-free modules <code>optimization.sideEffects</code> is required.</p> <p>The following symbols can be analysed:</p> <ul> <li>function declarations</li> <li>class declarations</li> <li><code>export default</code> with or variable declarations with <ul> <li>function expressions</li> <li>class expressions</li> <li>sequence expressions</li> <li><code>/*#__PURE__*/</code> expressions</li> <li>local variables</li> <li>imported bindings</li> </ul> </li> </ul> <p><strong>FEEDBACK</strong>: If you find something missing in this analysis, please report an issue and we consider adding it.</p> <p>Using <code>eval()</code> will bail-out this optimization for a module, because evaled code could reference any symbol in scope.</p> <p>This optimization is also known as Deep Scope Analysis.</p> <h3 id="commonjs-tree-shaking">CommonJs Tree Shaking<a href="#commonjs-tree-shaking" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>webpack used to opt-out from used exports analysing for CommonJs exports and <code>require()</code> calls.</p> <p>webpack 5 adds support for some CommonJs constructs, allows to eliminate unused CommonJs exports and track referenced export names from <code>require()</code> calls.</p> <p>The following constructs are supported:</p> <ul> <li><code>exports|this|module.exports.xxx = ...</code></li> <li><code>exports|this|module.exports = require("...")</code> (reexport)</li> <li><code>exports|this|module.exports.xxx = require("...").xxx</code> (reexport)</li> <li><code>Object.defineProperty(exports|this|module.exports, "xxx", ...)</code></li> <li><code>require("abc").xxx</code></li> <li><code>require("abc").xxx()</code></li> <li>importing from ESM</li> <li><code>require()</code> a ESM</li> <li>flagged exportType (special handling for non-strict ESM import): <ul> <li><code>Object.defineProperty(exports|this|module.exports, "__esModule", { value: true|!0 })</code></li> <li><code>exports|this|module.exports.__esModule = true|!0</code></li> </ul> </li> <li>It's planned to support more constructs in future</li> </ul> <p>When detecting not analysable code, webpack bails out and doesn't track export information at all for these modules (for performance reasons).</p> <h3 id="side-effect-analysis">Side-Effect analysis<a href="#side-effect-analysis" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The <code>"sideEffects"</code> flag in package.json allows to manually flag modules as side-effect-free, which allows to drop them when unused.</p> <p>webpack 5 can also automatically flag modules as side-effect-free according to a static analysis of the source code.</p> <h3 id="optimization-per-runtime">Optimization per runtime<a href="#optimization-per-runtime" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Webpack 5 is now able (and does by default) to analyse and optimize modules per runtime (A runtime is often equal to an entrypoint). This allows to only exports in these entrypoints where they are really needed. Entrypoints doesn't affect each other (as long as using a runtime per entrypoint)</p> <h3 id="module-concatenation">Module Concatenation<a href="#module-concatenation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Module Concatenation also works per runtime to allow different concatenation for each runtime.</p> <p>Module Concatenation has become a first class citizen and any module and dependency is now allowed to implement it. Initially webpack 5 already added support for ExternalModules and json modules, more will likely ship soonish.</p> <h3 id="general-tree-shaking-improvements">General Tree Shaking improvements<a href="#general-tree-shaking-improvements" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>export *</code> has been improved to track more info and do no longer flag the <code>default</code> export as used.</p> <p><code>export *</code> will now show warnings when webpack is sure that there are conflicting exports.</p> <p><code>import()</code> allows to manually tree shake the module via <code>/* webpackExports: ["abc", "default"] */</code> magic comment.</p> <h3 id="development-production-similarity">Development Production Similarity<a href="#development-production-similarity" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>We try to find a good trade-off between build performance in development mode and avoiding production-only problems by improving the similarity between both modes.</p> <p>Webpack 5 enables the <code>sideEffects</code> optimization by default in both modes. In webpack 4 this optimization lead to some production-only errors because of an incorrect <code>"sideEffects"</code> flag in package.json. Enabling this optimization in development allows to find these problems faster and easier.</p> <p>In many cases development and production happen on different OS with different case-sensitivity of filesystem, so webpack 5 adds a few more warnings/errors when there is something weird casing-wise.</p> <h3 id="improved-code-generation">Improved Code Generation<a href="#improved-code-generation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>webpack detects when ASI happens and generates shorter code when no semicolons are inserted. <code>Object(...)</code> -> <code>(0, ...)</code></p> <p>webpack merges multiple export getters into a single runtime function call: <code>r.d(x, "a", () => a); r.d(x, "b", () => b);</code> -> <code>r.d(x, {a: () => a, b: () => b});</code></p> <p>There are additional options in <code>output.environment</code> now. They allows specifying which ECMAScript feature can be used for runtime code generated by webpack.</p> <p>One usually do not specify this option directly, but would use the <code>target</code> option instead.</p> <p>webpack 4 used to only emit ES5 code. webpack 5 can generate both ES5 and ES6/ES2015 code now.</p> <p>Supporting only modern browsers will generate shorter code using arrow functions and more spec-conform code using <code>const</code> declarations with TDZ for <code>export default</code>.</p> <h3 id="improved-target-option">Improved <code>target</code> option<a href="#improved-target-option" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>In webpack 4 the <code>target</code> was a rough choice between <code>"web"</code> and <code>"node"</code> (and a few others). Webpack 5 gives you more options here.</p> <p>The <code>target</code> option now influences more things about the generated code than before:</p> <ul> <li>method of chunk loading</li> <li>format of chunks</li> <li>method of wasm loading</li> <li>method of chunk and wasm loading in workers</li> <li>global object used</li> <li>if publicPath should be determined automatically</li> <li>ECMAScript features/syntax used in the generated code</li> <li><code>externals</code> enabled by default</li> <li>Behavior of some Node.js compat layers (<code>global</code>, <code>__filename</code>, <code>__dirname</code>)</li> <li>Resolving of modules (<code>browser</code> field, <code>exports</code> and <code>imports</code> conditions)</li> <li>Some loaders might change behavior based on that</li> </ul> <p>For some of these things the choice between <code>"web"</code> and <code>"node"</code> is too rough and we need more information. Therefore we allow to specify the minimum version e.g. like <code>"node10.13"</code> and infer more properties about the target environment.</p> <p>It's now also allowed to combined multiple targets with an array and webpack will determine the minimum properties of all targets. Using an array is also useful when using targets that doesn't give full information like <code>"web"</code> or <code>"node"</code> (without version number). E. g. <code>["web", "es2020"]</code> combines these two partial targets.</p> <p>There is a target <code>"browserslist"</code> which will use browserslist data to determine properties of the environment. This target is also used by default when there is a browserslist config available in the project. When none such config is available, the <code>"web"</code> target will be used by default.</p> <p>Some combinations and features are not yet implemented and will result in errors. They are preparations for future features. Examples:</p> <ul> <li><code>["web", "node"]</code> will lead to an universal chunk loading method, which is not implemented yet</li> <li><code>["web", "node"]</code> + <code>output.module: true</code> will lead to a module chunk loading method, which is not implemented yet</li> <li><code>"web"</code> will lead to <code>http(s):</code> imports being treated as <code>module</code> externals, which are not implemented yet (Workaround: <code>externalsPresets: { web: false, webAsync: true }</code>, which will use <code>import()</code> instead).</li> </ul> <h3 id="splitchunks-and-module-sizes">SplitChunks and Module Sizes<a href="#splitchunks-and-module-sizes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Modules now express size in a better way than a single number. There are different types of sizes now.</p> <p>The SplitChunksPlugin now knows how to handle these different sizes and uses them for <code>minSize</code> and <code>maxSize</code>. By default, only <code>javascript</code> size is handled, but you can now pass multiple values to manage them:</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      minSize<span class="token operator">:</span> <span class="token punctuation">{</span>
        javascript<span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
        webassembly<span class="token operator">:</span> <span class="token number">50000</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>You can still use a single number for sizes. In this case webpack will automatically use the default size types.</p> <p>The <code>mini-css-extract-plugin</code> uses <code>css/mini-extra</code> as size type, and adds this size type to the default types automatically.</p> <h2 id="major-changes-performance">Major Changes: Performance<a href="#major-changes-performance" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="persistent-caching">Persistent Caching<a href="#persistent-caching" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>There is now a filesystem cache. It's opt-in and can be enabled with the following configuration:</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  cache<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. Set cache type to filesystem</span>
    type<span class="token operator">:</span> <span class="token string">'filesystem'</span><span class="token punctuation">,</span>

    buildDependencies<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 2. Add your config as buildDependency to get cache invalidation on config change</span>
      config<span class="token operator">:</span> <span class="token punctuation">[</span>__filename<span class="token punctuation">]</span><span class="token punctuation">,</span>

      <span class="token comment">// 3. If you have other things the build depends on you can add them here</span>
      <span class="token comment">// Note that webpack, loaders and all modules referenced from your config are automatically added</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>Important notes:</p> <p>By default, webpack assumes that the <code>node_modules</code> directory, which webpack is inside of, is <strong>only</strong> modified by a package manager. Hashing and timestamping is skipped for <code>node_modules</code>. Instead, only the package name and version is used for performance reasons. Symlinks (i. e. <code>npm/yarn link</code>) are fine as long <code>resolve.symlinks: false</code> is not specified (avoid that anyway). Do not edit files in <code>node_modules</code> directly unless you opt-out of this optimization with <code>snapshot.managedPaths: []</code>. When using Yarn PnP webpack assumes that the yarn cache is immutable (which it usually is). You can opt-out of this optimization with <code>snapshot.immutablePaths: []</code></p> <p>The cache will be stored into <code>node_modules/.cache/webpack</code> (when using node_modules) resp. <code>.yarn/.cache/webpack</code> (when using Yarn PnP) by default. You probably never have to delete it manually, when all plugins handle caching correctly.</p> <p>Many internal plugins will use the Persistent Cache too. Examples: <code>SourceMapDevToolPlugin</code> (to cache the SourceMap generation) or <code>ProgressPlugin</code> (to cache the number of modules)</p> <p>The Persistent Cache will automatically create multiple cache files depending on usage to optimize read and write access to and from the cache.</p> <p>By default timestamps will be used for snapshotting in development mode and file hashes in production mode. File hashes allow to use Persistent Caching on CI too.</p> <h4 id="compiler-idle-and-close">Compiler Idle and Close<a href="#compiler-idle-and-close" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>Compilers now need to be closed after being used. Compilers now enter and leave the idle state and have hooks for these states. Plugins may use these hooks to do unimportant work. (i. e. the Persistent cache slowly stores the cache to disk). On compiler close - All remaining work should be finished as fast as possible. A callback signals the closing as done.</p> <p>Plugins and their respective authors should expect that some users may forget to close the Compiler. So, all work should eventually be finishing while in idle too. Processes should be prevented from exiting when the work is being done.</p> <p>The <code>webpack()</code> façade automatically calls <code>close</code> when being passed a callback.</p> <p><strong>MIGRATION</strong>: While using the Node.js API, make sure to call <code>Compiler.close</code> when done.</p> <h3 id="file-emitting">File Emitting<a href="#file-emitting" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>webpack used to always emit all output files during the first build but skipped writing unchanged files during incremental (watch) builds. It is assumed that nothing else changes output files while webpack is running.</p> <p>With Persistent Caching added a watch-like experience should be given even when restarting the webpack process, but it would be a too strong assumption to think that nothing else changes the output directory even when webpack is not running.</p> <p>So webpack will now check existing files in the output directory and compares their content with the output file in memory. It will only write the file when it has been changed. This is only done on the first build. Any incremental build will always write the file when a new asset has been generated in the running webpack process.</p> <p>We assume that webpack and plugins only generate new assets when content has been changed. Caching should be used to ensure that no new asset is generated when input is equal. Not following this advice will degrade performance.</p> <p>Files that are flagged as <code>[immutable]</code> (including a content hash), will never be written when a file with the same name already exists. We assume that the content hash will change when file content changes. This is true in general, but might not be always true during webpack or plugin development.</p> <h2 id="major-changes-long-outstanding-problems">Major Changes: Long outstanding problems<a href="#major-changes-long-outstanding-problems" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="code-splitting-for-single-file-targets">Code Splitting for single-file-targets<a href="#code-splitting-for-single-file-targets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Targets that only allow to startup a single file (like node, WebWorker, electron main) now supports loading the dependent pieces required for bootstrapping automatically by the runtime.</p> <p>This allows using <code>opimization.splitChunks</code> for these targets with <code>chunks: "all"</code> and also <code>optimization.runtimeChunk</code></p> <p>Note that with targets where chunk loading is async, this makes initial evaluation async too. This can be an issue when using <code>output.library</code>, since the exported value is a Promise now.</p> <h3 id="updated-resolver">Updated Resolver<a href="#updated-resolver" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>enhanced-resolve</code> was updated to v5. This has the following improvements:</p> <ul> <li>The resolve tracks more dependencies, like missing files</li> <li>aliasing may have multiple alternatives</li> <li>aliasing to <code>false</code> is possible now</li> <li>support for features like <code>exports</code> and <code>imports</code> fields</li> <li>Increased performance</li> </ul> <h3 id="chunks-without-js">Chunks without JS<a href="#chunks-without-js" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Chunks that contain no JS code, will no longer generate a JS file. This allows to have chunks that contain only CSS.</p> <h2 id="major-changes-future">Major Changes: Future<a href="#major-changes-future" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="experiments">Experiments<a href="#experiments" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Not all features are stable from the beginning. In webpack 4 we added experimental features and noted in the changelog that they are experimental, but it was not always clear from the configuration that these features are experimental.</p> <p>In webpack 5 there is a new <code>experiments</code> config option which allows to enable experimental features. This makes it clear which ones are enabled/used.</p> <p>While webpack follows semantic versioning, it will make an exception for experimental features. Experimental features might contain breaking changes in minor webpack versions. When this happens we will add a clear note into the changelog. This will allow us to iterate faster for experimental features, while also allowing us to stay longer on a major version for stable features.</p> <p>The following experiments will ship with webpack 5:</p> <ul> <li>Old WebAssembly support like in webpack 4 (<code>experiments.syncWebAssembly</code>)</li> <li>New WebAssembly support according to the <a href="https://github.com/WebAssembly/esm-integration">updated spec</a> (<code>experiments.asyncWebAssembly</code>) <ul> <li>This makes a WebAssembly module an async module</li> </ul> </li> <li><a href="https://github.com/tc39/proposal-top-level-await">Top Level Await</a> Stage 3 proposal (<code>experiments.topLevelAwait</code>) <ul> <li>Using <code>await</code> on top-level makes the module an async module</li> </ul> </li> <li>Emitting bundle as module (<code>experiments.outputModule</code>) <ul> <li>This removed the wrapper IIFE from the bundle, enforces strict mode, lazy loads via <code>&#x3C;script type="module"></code> and minimized in module mode</li> </ul> </li> </ul> <p>Note that this also means WebAssembly support is now disabled by default.</p> <h3 id="minimum-nodejs-version">Minimum Node.js Version<a href="#minimum-nodejs-version" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The minimum supported Node.js version has increased from 6 to 10.13.0(LTS).</p> <p><strong>MIGRATION</strong>: Upgrade to the latest Node.js version available.</p> <h2 id="changes-to-the-configuration">Changes to the Configuration<a href="#changes-to-the-configuration" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="changes-to-the-structure">Changes to the Structure<a href="#changes-to-the-structure" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <ul> <li><code>entry: {}</code> allows an empty object now (to allow to use plugins to add entries)</li> <li><code>target</code> supports an array, versions and browserslist</li> <li><code>cache: Object</code> removed: Setting to a memory-cache object is no longer possible</li> <li><code>cache.type</code> added: It's now possible to choose between <code>"memory"</code> and <code>"filesystem"</code></li> <li>New configuration options for <code>cache.type = "filesystem"</code> added: <ul> <li><code>cache.cacheDirectory</code></li> <li><code>cache.name</code></li> <li><code>cache.version</code></li> <li><code>cache.store</code></li> <li><code>cache.hashAlgorithm</code></li> <li><code>cache.idleTimeout</code></li> <li><code>cache.idleTimeoutForInitialStore</code></li> <li><code>cache.buildDependencies</code></li> </ul> </li> <li><code>snapshot.resolveBuildDependencies</code> added</li> <li><code>snapshot.resolve</code> added</li> <li><code>snapshot.module</code> added</li> <li><code>snapshot.managedPaths</code> added</li> <li><code>snapshot.immutablePaths</code> added</li> <li><code>resolve.cache</code> added: Allows to disable/enable the safe resolve cache</li> <li><code>resolve.concord</code> removed</li> <li><code>resolve.alias</code> values can be arrays or <code>false</code> now</li> <li><code>resolve.restrictions</code> added: Allows to restrict potential resolve results</li> <li><code>resolve.fallback</code> added: Allow to alias requests that failed to resolve</li> <li><code>resolve.preferRelative</code> added: Allows to resolve modules requests are relative requests too</li> <li>Automatic polyfills for native Node.js modules were removed <ul> <li><code>node.Buffer</code> removed</li> <li><code>node.console</code> removed</li> <li><code>node.process</code> removed</li> <li><code>node.*</code> (Node.js native module) removed</li> <li><strong>MIGRATION</strong>: <code>resolve.alias</code> and <code>ProvidePlugin</code>. Errors will give hints. (Refer to <a href="https://github.com/webpack/node-libs-browser">node-libs-browser</a> for polyfills &#x26; mocks used in v4)</li> </ul> </li> <li><code>output.filename</code> can now be a function</li> <li><code>output.assetModuleFilename</code> added</li> <li><code>output.jsonpScriptType</code> renamed to <code>output.scriptType</code></li> <li><code>devtool</code> is more strict <ul> <li>Format: <code>false | eval | [inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map</code></li> </ul> </li> <li><code>optimization.chunkIds: "deterministic"</code> added</li> <li><code>optimization.moduleIds: "deterministic"</code> added</li> <li><code>optimization.moduleIds: "hashed"</code> deprecated</li> <li><code>optimization.moduleIds: "total-size"</code> removed</li> <li>Deprecated flags for module and chunk ids were removed <ul> <li><code>optimization.hashedModuleIds</code> removed</li> <li><code>optimization.namedChunks</code> removed (<code>NamedChunksPlugin</code> too)</li> <li><code>optimization.namedModules</code> removed (<code>NamedModulesPlugin</code> too)</li> <li><code>optimization.occurrenceOrder</code> removed</li> <li><strong>MIGRATION</strong>: Use <code>chunkIds</code> and <code>moduleIds</code></li> </ul> </li> <li><code>optimization.splitChunks</code> <code>test</code> no longer matches chunk name <ul> <li><strong>MIGRATION</strong>: Use a test function <code>(module, { chunkGraph }) => chunkGraph.getModuleChunks(module).some(chunk => chunk.name === "name")</code></li> </ul> </li> <li><code>optimization.splitChunks</code> <code>minRemainingSize</code> was added</li> <li><code>optimization.splitChunks</code> <code>filename</code> can now be a function</li> <li><code>optimization.splitChunks</code> sizes can now be objects with a size per source type <ul> <li><code>minSize</code></li> <li><code>minRemainingSize</code></li> <li><code>maxSize</code></li> <li><code>maxAsyncSize</code></li> <li><code>maxInitialSize</code></li> </ul> </li> <li><code>optimization.splitChunks</code> <code>maxAsyncSize</code> and <code>maxInitialSize</code> added next to <code>maxSize</code>: allows to specify different max sizes for initial and async chunks</li> <li><code>optimization.splitChunks</code> <code>name: true</code> removed: Automatic names are no longer supported <ul> <li><strong>MIGRATION</strong>: Use the default. <code>chunkIds: "named"</code> will give your files useful names for debugging</li> </ul> </li> <li><code>optimization.splitChunks.cacheGroups[].idHint</code> added: Gives a hint how the named chunk id should be chosen</li> <li><code>optimization.splitChunks</code> <code>automaticNamePrefix</code> removed <ul> <li><strong>MIGRATION</strong>: Use <code>idHint</code> instead</li> </ul> </li> <li><code>optimization.splitChunks</code> <code>filename</code> is no longer restricted to initial chunks</li> <li><code>optimization.splitChunks</code> <code>usedExports</code> added to include used exports when comparing modules</li> <li><code>optimization.splitChunks.defaultSizeTypes</code> added: Specified the size types when using numbers for sizes</li> <li><code>optimization.mangleExports</code> added</li> <li><code>optimization.minimizer</code> <code>"..."</code> can be used to reference the defaults</li> <li><code>optimization.usedExports</code> <code>"global"</code> value added to allow to disable the analysis per runtime and instead do it globally (better performance)</li> <li><code>optimization.noEmitOnErrors</code> renamed to <code>optimization.emitOnErrors</code> and logic inverted</li> <li><code>optimization.realContentHash</code> added</li> <li><code>output.devtoolLineToLine</code> removed <ul> <li><strong>MIGRATION</strong>: No replacement</li> </ul> </li> <li><code>output.chunkFilename: Function</code> is now allowed</li> <li><code>output.hotUpdateChunkFilename: Function</code> is now forbidden: It never worked anyway.</li> <li><code>output.hotUpdateMainFilename: Function</code> is now forbidden: It never worked anyway.</li> <li><code>output.importFunctionName: string</code> specifies the name used as replacement for <code>import()</code> to allow polyfilling for non-supported environments</li> <li><code>output.charset</code> added: setting it to false omit the <code>charset</code> property on script tags</li> <li><code>output.hotUpdateFunction</code> renamed to <code>output.hotUpdateGlobal</code></li> <li><code>output.jsonpFunction</code> renamed to <code>output.chunkLoadingGlobal</code></li> <li><code>output.chunkCallbackFunction</code> renamed to <code>output.chunkLoadingGlobal</code></li> <li><code>output.chunkLoading</code> added</li> <li><code>output.enabledChunkLoadingTypes</code> added</li> <li><code>output.chunkFormat</code> added</li> <li><code>module.rules</code> <code>resolve</code> and <code>parser</code> will merge in a different way (objects are deeply merged, array may include <code>"..."</code> to reference to prev value)</li> <li><code>module.rules</code> <code>parser.worker</code> added: Allows to configure the worker supported</li> <li><code>module.rules</code> <code>query</code> and <code>loaders</code> were removed</li> <li><code>module.rules</code> <code>options</code> passing a string is deprecated <ul> <li><strong>MIGRATION</strong>: Pass an options object instead, open an issue on the loader when this is not supported</li> </ul> </li> <li><code>module.rules</code> <code>mimetype</code> added: allows to match a mimetype of a DataURI</li> <li><code>module.rules</code> <code>descriptionData</code> added: allows to match a data from package.json</li> <li><code>module.defaultRules</code> <code>"..."</code> can be used to reference the defaults</li> <li><code>stats.chunkRootModules</code> added: Show root modules for chunks</li> <li><code>stats.orphanModules</code> added: Show modules which are not emitted</li> <li><code>stats.runtime</code> added: Show runtime modules</li> <li><code>stats.chunkRelations</code> added: Show parent/children/sibling chunks</li> <li><code>stats.errorStack</code> added: Show webpack-internal stack trace of errors</li> <li><code>stats.preset</code> added: select a preset</li> <li><code>stats.relatedAssets</code> added: show assets that are related to other assets (e.g. SourceMaps)</li> <li><code>stats.warningsFilter</code> deprecated in favor of <code>ignoreWarnings</code></li> <li><code>BannerPlugin.banner</code> signature changed <ul> <li><code>data.basename</code> removed</li> <li><code>data.query</code> removed</li> <li><strong>MIGRATION</strong>: extract from <code>filename</code></li> </ul> </li> <li><code>SourceMapDevToolPlugin</code> <code>lineToLine</code> removed <ul> <li><strong>MIGRATION</strong>: No replacement</li> </ul> </li> <li><code>[hash]</code> as hash for the full compilation is now deprecated <ul> <li><strong>MIGRATION</strong>: Use <code>[fullhash]</code> instead or better use another hash option</li> </ul> </li> <li><code>[modulehash]</code> is deprecated <ul> <li><strong>MIGRATION</strong>: Use <code>[hash]</code> instead</li> </ul> </li> <li><code>[moduleid]</code> is deprecated <ul> <li><strong>MIGRATION</strong>: Use <code>[id]</code> instead</li> </ul> </li> <li><code>[filebase]</code> removed <ul> <li><strong>MIGRATION</strong>: Use <code>[base]</code> instead</li> </ul> </li> <li>New placeholders for file-based templates (i. e. SourceMapDevToolPlugin) <ul> <li><code>[name]</code></li> <li><code>[base]</code></li> <li><code>[path]</code></li> <li><code>[ext]</code></li> </ul> </li> <li><code>externals</code> when passing a function, it has now a different signature <code>({ context, request }, callback)</code> <ul> <li><strong>MIGRATION</strong>: Change signature</li> </ul> </li> <li><code>externalsPresets</code> added</li> <li><code>experiments</code> added (see Experiments section above)</li> <li><code>watchOptions.followSymlinks</code> added</li> <li><code>watchOptions.ignored</code> can now be a RegExp</li> <li><code>webpack.util.serialization</code> is now exposed.</li> </ul> <h3 id="changes-to-the-defaults">Changes to the Defaults<a href="#changes-to-the-defaults" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <ul> <li><code>target</code> is now <code>"browserslist"</code> by default when a browserslist config is available</li> <li><code>module.unsafeCache</code> is now only enabled for <code>node_modules</code> by default</li> <li><code>optimization.moduleIds</code> defaults to <code>deterministic</code> in production mode, instead of <code>size</code></li> <li><code>optimization.chunkIds</code> defaults to <code>deterministic</code> in production mode, instead of <code>total-size</code></li> <li><code>optimization.nodeEnv</code> defaults to <code>false</code> in <code>none</code> mode</li> <li><code>optimization.splitChunks.minSize</code> defaults to <code>20k</code> in production</li> <li><code>optimization.splitChunks.enforceSizeThreshold</code> defaults to <code>50k</code> in production</li> <li><code>optimization.splitChunks</code> <code>minRemainingSize</code> defaults to <code>minSize</code> <ul> <li>This will lead to less splitted chunks created in cases where the remaining part would be too small</li> </ul> </li> <li><code>optimization.splitChunks</code> <code>maxAsyncRequests</code> and <code>maxInitialRequests</code> defaults was been increased to 30</li> <li><code>optimization.splitChunks.cacheGroups.vendors</code> has be renamed to <code>optimization.splitChunks.cacheGroups.defaultVendors</code></li> <li><code>optimization.splitChunks.cacheGroups.defaultVendors.reuseExistingChunk</code> now defaults to <code>true</code></li> <li><code>optimization.minimizer</code> target default uses <code>compress.passes: 2</code> in terser options now</li> <li><code>resolve(Loader).cache</code> defaults to <code>true</code> when <code>cache</code> is used</li> <li><code>resolve(Loader).cacheWithContext</code> defaults to <code>false</code></li> <li><code>resolveLoader.extensions</code> remove <code>.json</code></li> <li><code>node.global</code> <code>node.__filename</code> and <code>node.__dirname</code> defaults to <code>false</code> in node-<code>target</code>s</li> <li><code>stats.errorStack</code> defaults to <code>false</code></li> </ul> <h2 id="loader-related-changes">Loader related Changes<a href="#loader-related-changes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="thisgetoptions"><code>this.getOptions</code><a href="#thisgetoptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>This new API should simplify the usage for options in loaders. It allows to pass a JSON schema for validation. See <a href="https://github.com/webpack/webpack/pull/10017">PR</a> for details</p> <h3 id="thisexec"><code>this.exec</code><a href="#thisexec" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>This has been removed from loader context</p> <p><strong>MIGRATION</strong>: This can be implemented in the loader itself</p> <h3 id="thisgetresolve"><code>this.getResolve</code><a href="#thisgetresolve" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>getResolve(options)</code> in the loader API will merge options in a different way, see <code>module.rules</code> <code>resolve</code>.</p> <p>As webpack 5 differs between different issuing dependencies so it might make sense to pass a <code>dependencyType</code> as option (e.g. <code>"esm"</code>, <code>"commonjs"</code>, or others).</p> <h2 id="major-internal-changes">Major Internal Changes<a href="#major-internal-changes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <aside class="todo"><h6 class="todo__prefix">todo</h6><p>This section might need a bit more refinement</p></aside> <p>The following changes are only relevant for plugin authors:</p> <h3 id="new-plugin-order">New plugin order<a href="#new-plugin-order" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Plugins in webpack 5 are now applies <strong>before</strong> the configuration defaults has been applied. This allows plugins to apply their own defaults, or act as configuration presets.</p> <p>But this is also a breaking change as plugins can't rely on configuration values to be set when they are applied.</p> <p><strong>MIGRATION</strong>: Access configuration only in plugin hooks. Or best avoid accessing configuration at all and take options via constructor.</p> <h3 id="runtime-modules">Runtime Modules<a href="#runtime-modules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>A large part of the runtime code was moved into the so-called "runtime modules". These special modules are in-charge of adding runtime code. They can be added into any chunk, but are currently always added to the runtime chunk. "Runtime Requirements" control which runtime modules (or core runtime parts) are added to the bundle. This ensures that only runtime code that is used is added to the bundle. In the future, runtime modules could also be added to an on-demand-loaded chunk, to load runtime code when needed.</p> <p>In most cases, the core runtime allows to inline the entry module instead of calling it with <code>__webpack_require__</code>. If there is no other module in the bundle, no <code>__webpack_require__</code> is needed at all. This combines well with Module Concatenation where multiple modules are concatenated into a single module.</p> <p>In the best case, no runtime code is needed at all.</p> <p><strong>MIGRATION</strong>: If you are injecting runtime code into the webpack runtime in a plugin, consider using RuntimeModules instead.</p> <h3 id="serialization">Serialization<a href="#serialization" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>A serialization mechanism was added to allow serialization of complex objects in webpack. It has an opt-in semantic, so classes that should be serialized need to be explicitly flagged (and their serialization implemented). This has been done for most Modules, all Dependencies and some Errors.</p> <p><strong>MIGRATION</strong>: When using custom Modules or Dependencies, it is recommended to make them serializable to benefit from persistent caching.</p> <h3 id="plugins-for-caching">Plugins for Caching<a href="#plugins-for-caching" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>A <code>Cache</code> class with a plugin interface has been added. This class can be used to write and read to the cache. Depending on the configuration, different plugins can add functionality to the cache. The <code>MemoryCachePlugin</code> adds in-memory caching. The <code>FileCachePlugin</code> adds persistent (file-system) caching.</p> <p>The <code>FileCachePlugin</code> uses the serialization mechanism to persist and restore cached items to/from the disk.</p> <h3 id="hook-object-frozen">Hook Object Frozen<a href="#hook-object-frozen" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Classes with <code>hooks</code> have their <code>hooks</code> object frozen, so adding custom hooks is no longer possible this way.</p> <p><strong>MIGRATION</strong>: The recommended way to add custom hooks is using a WeakMap and a static <code>getXXXHooks(XXX)</code> (i. e. <code>getCompilationHook(compilation)</code>) method. Internal classes use the same mechanism used for custom hooks.</p> <h3 id="tapable-upgrade">Tapable Upgrade<a href="#tapable-upgrade" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The compat layer for webpack 3 plugins has been removed. It had already been deprecated for webpack 4.</p> <p>Some less used tapable APIs were removed or deprecated.</p> <p><strong>MIGRATION</strong>: Use the new tapable API.</p> <h3 id="staged-hooks">Staged Hooks<a href="#staged-hooks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>For several steps in the sealing process, there had been multiple hooks for different stages. i. e. <code>optimizeDependenciesBasic</code> <code>optimizeDependencies</code> and <code>optimizeDependenciesAdvanced</code>. These have been removed in favor of a single hook which can be used with a <code>stage</code> option. See <code>OptimizationStages</code> for possible stage values.</p> <p><strong>MIGRATION</strong>: Hook into the remaining hook instead. You may add a <code>stage</code> option.</p> <h3 id="mainchunkmoduletemplate-deprecation">Main/Chunk/ModuleTemplate deprecation<a href="#mainchunkmoduletemplate-deprecation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Bundle templating has been refactored. MainTemplate/ChunkTemplate/ModuleTemplate were deprecated and the JavascriptModulesPlugin takes care of JS templating now.</p> <p>Before that refactoring, JS output was handled by Main/ChunkTemplate while another output (i. e. WASM, CSS) was handled by plugins. This looks like JS is first class, while another output is second class. The refactoring changes that and all output is handled by their plugins.</p> <p>It's still possible to hook into parts of the templating. The hooks are in JavascriptModulesPlugin instead of Main/ChunkTemplate now. (Yes plugins can have hooks too. I call them attached hooks.)</p> <p>There is a compat-layer, so Main/Chunk/ModuleTemplate still exist, but only delegate tap calls to the new hook locations.</p> <p><strong>MIGRATION</strong>: Follow the advice in the deprecation messages. Mostly pointing to hooks at different locations.</p> <h3 id="entry-point-descriptor">Entry point descriptor<a href="#entry-point-descriptor" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>If an object is passed as entry point the value might be a string, array of strings or a descriptor:</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    catalog<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">'./catalog.js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>Descriptor syntax might be used to pass additional options to an entry point.</p> <h4 id="entry-point-output-filename">Entry point output filename<a href="#entry-point-output-filename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>By default, the output filename for the entry chunk is extracted from <code>output.filename</code> but you can specify a custom output filename for a specific entry:</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    about<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">'./about.js'</span><span class="token punctuation">,</span> filename<span class="token operator">:</span> <span class="token string">'pages/[name][ext]'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="entry-point-dependency">Entry point dependency<a href="#entry-point-dependency" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>By default, every entry chunk stores all the modules that it uses. With <code>dependOn</code>-option you can share the modules from one entry chunk to another:</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span> dependOn<span class="token operator">:</span> <span class="token string">'react-vendors'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'react-vendors'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">,</span> <span class="token string">'react-dom'</span><span class="token punctuation">,</span> <span class="token string">'prop-types'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>The app chunk will not contain the modules that <code>react-vendors</code> has.</p> <h4 id="entry-point-library">Entry point library<a href="#entry-point-library" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>The entry descriptor allows to pass a different <code>library</code> option for each entrypoint.</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    commonjs<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">'./lib.js'</span><span class="token punctuation">,</span>
      library<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">'commonjs-module'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    amd<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">'./lib.js'</span><span class="token punctuation">,</span>
      library<span class="token operator">:</span> <span class="token punctuation">{</span>
        type<span class="token operator">:</span> <span class="token string">'amd'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="entry-point-runtime">Entry point runtime<a href="#entry-point-runtime" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>The entry descriptor allows to specify a <code>runtime</code> per entry. When specified a chunk with this name is created which contains only the runtime code for the entry. When multiple entries specify the same <code>runtime</code>, that chunk will contain a common runtime for all these entry. This means they could be used together on the same HTML page.</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span>
      runtime<span class="token operator">:</span> <span class="token string">'app-runtime'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h4 id="entry-point-chunk-loading">Entry point chunk loading<a href="#entry-point-chunk-loading" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>The entry descriptor allows to specify a <code>chunkLoading</code> per entry. The runtime for this entry will use this to load chunks.</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    app<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    worker<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">import</span><span class="token operator">:</span> <span class="token string">'./worker.js'</span><span class="token punctuation">,</span>
      chunkLoading<span class="token operator">:</span> <span class="token string">'importScripts'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="order-and-ids">Order and IDs<a href="#order-and-ids" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>webpack used to order modules and chunks in the Compilation phase, in a specific way, to assign IDs in incremental order. This is no longer the case. The order will no longer be used for id generation, instead, the full control of ID generation is in the plugin.</p> <p>Hooks to optimize the order of module and chunks have been removed.</p> <p><strong>MIGRATION</strong>: You cannot rely on the order of modules and chunks in the compilation phase no more.</p> <h3 id="arrays-to-sets">Arrays to Sets<a href="#arrays-to-sets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <ul> <li>Compilation.modules is now a Set</li> <li>Compilation.chunks is now a Set</li> <li>Chunk.files is now a Set</li> </ul> <p>There is a compat-layer which prints deprecation warnings.</p> <p><strong>MIGRATION</strong>: Use Set methods instead of Array methods.</p> <h3 id="compilationfilesysteminfo">Compilation.fileSystemInfo<a href="#compilationfilesysteminfo" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>This new class can be used to access information about the filesystem in a cached way. Currently, it allows asking for both file and directory timestamps. Information about timestamps is transferred from the watcher if possible, otherwise determined by filesystem access.</p> <p>In the future, asking for file content hashes will be added and modules will be able to check validity with file contents instead of file hashes.</p> <p><strong>MIGRATION</strong>: Instead of using <code>file/contextTimestamps</code> use the <code>compilation.fileSystemInfo</code> API instead.</p> <p>Timestamping for directories is possible now, which allows serialization of ContextModules.</p> <p><code>Compiler.modifiedFiles</code> has been added (next to <code>Compiler.removedFiles</code>) to make it easier to reference the changed files.</p> <h3 id="filesystems">Filesystems<a href="#filesystems" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Next to <code>compiler.inputFileSystem</code> and <code>compiler.outputFileSystem</code> there is a new <code>compiler.intermediateFileSystem</code> for all fs actions that are not considered as input or output, like writing records, cache or profiling output.</p> <p>The filesystems have now the <code>fs</code> interface and do no longer demand additional methods like <code>join</code> or <code>mkdirp</code>. But if they have methods like <code>join</code> or <code>dirname</code> they are used.</p> <h3 id="hot-module-replacement">Hot Module Replacement<a href="#hot-module-replacement" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>HMR runtime has been refactored to Runtime Modules. <code>HotUpdateChunkTemplate</code> has been merged into <code>ChunkTemplate</code>. ChunkTemplates and plugins should also handle <code>HotUpdateChunk</code>s now.</p> <p>The javascript part of HMR runtime has been separated from the core HMR runtime. Other module types can now also handle HMR in their own way. In the future, this will allow i. e. HMR for the mini-css-extract-plugin or for WASM modules.</p> <p><strong>MIGRATION</strong>: As this is a newly introduced functionality, there is nothing to migrate.</p> <p><code>import.meta.webpackHot</code> exposes the same API as <code>module.hot</code>. This is also usable from strict ESM modules (.mjs, type: "module" in package.json) which do not have access to <code>module</code>.</p> <h3 id="work-queues">Work Queues<a href="#work-queues" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>webpack used to handle module processing by functions calling functions, and a <code>semaphore</code> which limits parallelism. The <code>Compilation.semaphore</code> has been removed and async queues now handle work queuing and processing. Each step has a separate queue:</p> <ul> <li><code>Compilation.factorizeQueue</code>: calling the module factory for a group of dependencies.</li> <li><code>Compilation.addModuleQueue</code>: adding the module to the compilation queue (may restore module from cache).</li> <li><code>Compilation.buildQueue</code>: building the module if necessary (may stores module to cache).</li> <li><code>Compilation.rebuildQueue</code>: building a module again if manually triggered.</li> <li><code>Compilation.processDependenciesQueue</code>: processing dependencies of a module.</li> </ul> <p>These queues have some hooks to watch and intercept job processing.</p> <p>In the future, multiple compilers may work together and job orchestration can be done by intercepting these queues.</p> <p><strong>MIGRATION</strong>: As this is a newly introduced functionality, there is nothing to migrate.</p> <h3 id="logging">Logging<a href="#logging" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>webpack internals includes some logging now. <code>stats.logging</code> and <code>infrastructureLogging</code> options can be used to enabled these messages.</p> <h3 id="module-and-chunk-graph">Module and Chunk Graph<a href="#module-and-chunk-graph" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>webpack used to store a resolved module in the dependency, and store the contained modules in the chunk. This is no longer the case. All information about how modules are connected in the module graph are now stored in a ModuleGraph class. All information about how modules are connected with chunks are now stored in the ChunkGraph class. The information which depends on i. e. the chunk graph, is also stored in the related class.</p> <p>That means the following information about modules has been moved:</p> <ul> <li>Module connections -> ModuleGraph</li> <li>Module issuer -> ModuleGraph</li> <li>Module optimization bailout -> ModuleGraph (TODO: check if it should ChunkGraph instead)</li> <li>Module usedExports -> ModuleGraph</li> <li>Module providedExports -> ModuleGraph</li> <li>Module pre order index -> ModuleGraph</li> <li>Module post order index -> ModuleGraph</li> <li>Module depth -> ModuleGraph</li> <li>Module profile -> ModuleGraph</li> <li>Module id -> ChunkGraph</li> <li>Module hash -> ChunkGraph</li> <li>Module runtime requirements -> ChunkGraph</li> <li>Module is in chunk -> ChunkGraph</li> <li>Module is entry in chunk -> ChunkGraph</li> <li>Module is runtime module in chunk -> ChunkGraph</li> <li>Chunk runtime requirements -> ChunkGraph</li> </ul> <p>webpack used to disconnect modules from the graph when restored from the cache. This is no longer necessary. A Module stores no info about the graph and can technically be used in multiple graphs. This makes caching easier.</p> <p>There is a compat-layer for most of these changes, which prints a deprecation warning when used.</p> <p><strong>MIGRATION</strong>: Use the new APIs on ModuleGraph and ChunkGraph</p> <h3 id="init-fragments">Init Fragments<a href="#init-fragments" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>DependenciesBlockVariables</code> has been removed in favor of InitFragments. <code>DependencyTemplates</code> can now add <code>InitFragments</code> to inject code to the top of the module's source. <code>InitFragments</code> allows deduplication.</p> <p><strong>MIGRATION</strong>: Use <code>InitFragments</code> instead of inserting something at a negative index into the source.</p> <h3 id="module-source-types">Module Source Types<a href="#module-source-types" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Modules now have to define which source types they support via <code>Module.getSourceTypes()</code>. Depending on that, different plugins call <code>source()</code> with these types. i. e. for source type <code>javascript</code> the <code>JavascriptModulesPlugin</code> embeds the source code into the bundle. Source type <code>webassembly</code> will make the <code>WebAssemblyModulesPlugin</code> emit a wasm file. Custom source types are also supported, i. e. the mini-css-extract-plugin will probably use the source type <code>stylesheet</code> to embed the source code into a css file.</p> <p>There is no relationship between module type and source type. i. e. module type <code>json</code> also uses source type <code>javascript</code> and module type <code>webassembly/experimental</code> uses source types <code>javascript</code> and <code>webassembly</code>.</p> <p><strong>MIGRATION</strong>: Custom modules need to implement these new interface methods.</p> <h3 id="plugins-for-stats">Plugins for Stats<a href="#plugins-for-stats" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Stats <code>preset</code>, <code>default</code>, <code>json</code> and <code>toString</code> are now baked in by a plugin system. Converted the current Stats into plugins.</p> <p><strong>MIGRATION</strong>: Instead of replacing the whole Stats functionality, you can now customize it. Extra information can now be added to the stats json instead of writing a separate file.</p> <h3 id="new-watching">New Watching<a href="#new-watching" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The watcher used by webpack was refactored. It was previously using <code>chokidar</code> and the native dependency <code>fsevents</code> (only on macOS). Now it's only based on native Node.js <code>fs</code>. This means there is no native dependency left in webpack.</p> <p>It also captures more information about filesystem while watching. It now captures mtimes and watches event times, as well as information about missing files. For this, the <code>WatchFileSystem</code> API changed a little bit. While on it we also converted Arrays to Sets and Objects to Maps.</p> <h3 id="sizeonlysource-after-emit">SizeOnlySource after emit<a href="#sizeonlysource-after-emit" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>webpack now replaces the Sources in <code>Compilation.assets</code> with <code>SizeOnlySource</code> variants to reduce memory usage.</p> <h3 id="emitting-assets-multiple-times">Emitting assets multiple times<a href="#emitting-assets-multiple-times" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The warning <code>Multiple assets emit different content to the same filename</code> has been made an error.</p> <h3 id="exportsinfo">ExportsInfo<a href="#exportsinfo" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The way how information about exports of modules is stored has been refactored. The ModuleGraph now features an <code>ExportsInfo</code> for each <code>Module</code>, which stores information per export. It also stores information about unknown exports and if the module is used in a side-effect-only way.</p> <p>For each export the following information is stored:</p> <ul> <li>Is the export used? yes, no, not statically known, not determined. (see also <code>optimization.usedExports</code>)</li> <li>Is the export provided? yes, no, not statically known, not determined. (see also <code>optimization.providedExports</code>)</li> <li>Can be export name be renamed? yes, no, not determined.</li> <li>The new name, if the export has been renamed. (see also <code>optimization.mangleExports</code>)</li> <li>Nested ExportsInfo, if the export is an object with information attached itself <ul> <li>Used for reexporting namespace objects: <code>import * as X from "..."; export { X };</code></li> <li>Used for representing structure in JSON modules</li> </ul> </li> </ul> <h3 id="code-generation-phase">Code Generation Phase<a href="#code-generation-phase" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The Compilation features Code Generation as separate compilation phase now. It no longer runs hidden in <code>Module.source()</code> or <code>Module.getRuntimeRequirements()</code>.</p> <p>This should make the flow much cleaner. It also allows to report progress for this phase and makes Code Generation more visible when profiling.</p> <p><strong>MIGRATION</strong>: <code>Module.source()</code> and <code>Module.getRuntimeRequirements()</code> are deprecated now. Use <code>Module.codeGeneration()</code> instead.</p> <h3 id="dependencyreference">DependencyReference<a href="#dependencyreference" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>webpack used to have a single method and type to represent references of dependencies (<code>Compilation.getDependencyReference</code> returning a <code>DependencyReference</code>). This type used to include all information about this reference like the referenced Module, which exports have been imported, if it's a weak reference and also some ordering related information.</p> <p>Bundling all these information together makes getting the reference expensive and it's also called often (every time somebody needs one piece of information).</p> <p>In webpack 5 this part of the codebase was refactored and the method has been split up.</p> <ul> <li>The referenced module can be read from the ModuleGraphConnection</li> <li>The imported export names can be get via <code>Dependency.getReferencedExports()</code></li> <li>There is a <code>weak</code> flag on the <code>Dependency</code> class</li> <li>Ordering is only relevant to <code>HarmonyImportDependencies</code> and can be get via <code>sourceOrder</code> property</li> </ul> <h3 id="presentational-dependencies">Presentational Dependencies<a href="#presentational-dependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>There is now a new type of dependency in <code>NormalModules</code>: Presentational Dependencies</p> <p>These dependencies are only used during the Code Generation phase but are not used during Module Graph building. So they can never have referenced modules or influence exports/imports.</p> <p>These dependencies are cheaper to process and webpack uses them when possible</p> <h3 id="deprecated-loaders">Deprecated loaders<a href="#deprecated-loaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <ul> <li> <p><a href="https://github.com/webpack-contrib/null-loader"><code>null-loader</code></a></p> <p>It will be deprecated. Use</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      xyz$<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>or use an absolute path</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
    alias<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'....'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> </li> </ul> <h2 id="minor-changes">Minor Changes<a href="#minor-changes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <ul> <li><code>Compiler.name</code>: When generating a compiler name with absolute paths, make sure to separate them with <code>|</code> or <code>!</code> on both parts of the name. <ul> <li>Using space as a separator is now deprecated. (Paths could contain spaces)</li> <li>Hint: <code>|</code> is replaced with space in Stats string output.</li> </ul> </li> <li><code>SystemPlugin</code> is now disabled by default. <ul> <li><strong>MIGRATION</strong>: Avoid using it as the spec has been removed. You can re-enable it with <code>Rule.parser.system: true</code></li> </ul> </li> <li><code>ModuleConcatenationPlugin</code>: concatenation is no longer prevented by <code>DependencyVariables</code> as they have been removed <ul> <li>This means it can now concatenate in cases of <code>module</code>, <code>global</code>, <code>process</code> or the ProvidePlugin</li> </ul> </li> <li><code>Stats.presetToOptions</code> removed <ul> <li><strong>MIGRATION</strong>: Use <code>compilation.createStatsOptions</code> instead</li> </ul> </li> <li><code>SingleEntryPlugin</code> and <code>SingleEntryDependency</code> removed <ul> <li><strong>MIGRATION</strong>: use <code>EntryPlugin</code> and <code>EntryDependency</code></li> </ul> </li> <li>Chunks can now have multiple entry modules</li> <li><code>ExtendedAPIPlugin</code> removed <ul> <li><strong>MIGRATION</strong>: No longer needed, <code>__webpack_hash__</code> and <code>__webpack_chunkname__</code> can always be used and runtime code is injected where needed.</li> </ul> </li> <li><code>ProgressPlugin</code> no longer uses tapable context for <code>reportProgress</code> <ul> <li><strong>MIGRATION</strong>: Use <code>ProgressPlugin.getReporter(compiler)</code> instead</li> </ul> </li> <li><code>ProvidePlugin</code> is now re-enabled for <code>.mjs</code> files</li> <li><code>Stats</code> json <code>errors</code> and <code>warnings</code> no longer contain strings but objects with information splitted into properties. <ul> <li><strong>MIGRATION</strong>: Access the information on the properties. i. e. <code>message</code></li> </ul> </li> <li><code>Compilation.hooks.normalModuleLoader</code> is deprecated <ul> <li><strong>MIGRATION</strong>: Use <code>NormalModule.getCompilationHooks(compilation).loader</code> instead</li> </ul> </li> <li>Changed hooks in <code>NormalModuleFactory</code> from waterfall to bailing, changed and renamed hooks that return waterfall functions</li> <li>Removed <code>compilationParams.compilationDependencies</code> <ul> <li>Plugins can add dependencies to the compilation by adding to <code>compilation.file/context/missingDependencies</code></li> <li>Compat layer will delegate <code>compilationDependencies.add</code> to <code>fileDependencies.add</code></li> </ul> </li> <li><code>stats.assetsByChunkName[x]</code> is now always an array</li> <li><code>__webpack_get_script_filename__</code> function added to get the filename of a script file</li> <li><code>"sideEffects"</code> in package.json will be handled by <code>glob-to-regex</code> instead of <code>micromatch</code> <ul> <li>This may have changed semantics in edge-cases</li> </ul> </li> <li><code>checkContext</code> was removed from <code>IgnorePlugin</code></li> <li>New <code>__webpack_exports_info__</code> API allows export usage introspection</li> <li>SourceMapDevToolPlugin applies to non-chunk assets too now</li> <li>EnvironmentPlugin shows an error now when referenced env variable is missing and has no fallback</li> <li>Remove <code>serve</code> property from schema</li> </ul> <h2 id="other-minor-changes">Other Minor Changes<a href="#other-minor-changes" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <ul> <li>removed builtin directory and replaced builtins with runtime modules</li> <li>Removed deprecated features <ul> <li>BannerPlugin now only support one argument that can be an object, string or function</li> </ul> </li> <li>removed <code>CachePlugin</code></li> <li><code>Chunk.entryModule</code> is deprecated, use ChunkGraph instead</li> <li><code>Chunk.hasEntryModule</code> is deprecated</li> <li><code>Chunk.addModule</code> is deprecated</li> <li><code>Chunk.removeModule</code> is deprecated</li> <li><code>Chunk.getNumberOfModules</code> is deprecated</li> <li><code>Chunk.modulesIterable</code> is deprecated</li> <li><code>Chunk.compareTo</code> is deprecated</li> <li><code>Chunk.containsModule</code> is deprecated</li> <li><code>Chunk.getModules</code> is deprecated</li> <li><code>Chunk.remove</code> is deprecated</li> <li><code>Chunk.moveModule</code> is deprecated</li> <li><code>Chunk.integrate</code> is deprecated</li> <li><code>Chunk.canBeIntegrated</code> is deprecated</li> <li><code>Chunk.isEmpty</code> is deprecated</li> <li><code>Chunk.modulesSize</code> is deprecated</li> <li><code>Chunk.size</code> is deprecated</li> <li><code>Chunk.integratedSize</code> is deprecated</li> <li><code>Chunk.getChunkModuleMaps</code> is deprecated</li> <li><code>Chunk.hasModuleInGraph</code> is deprecated</li> <li><code>Chunk.updateHash</code> signature changed</li> <li><code>Chunk.getChildIdsByOrders</code> signature changed (TODO: consider moving to <code>ChunkGraph</code>)</li> <li><code>Chunk.getChildIdsByOrdersMap</code> signature changed (TODO: consider moving to <code>ChunkGraph</code>)</li> <li><code>Chunk.getChunkModuleMaps</code> removed</li> <li><code>Chunk.setModules</code> removed</li> <li>deprecated Chunk methods removed</li> <li><code>ChunkGraph</code> added</li> <li><code>ChunkGroup.setParents</code> removed</li> <li><code>ChunkGroup.containsModule</code> removed</li> <li><code>Compilation.cache</code> was removed in favor of <code>Compilation.getCache()</code></li> <li><code>ChunkGroup.remove</code> no longer disconnected the group from block</li> <li><code>ChunkGroup.compareTo</code> signature changed</li> <li><code>ChunkGroup.getChildrenByOrders</code> signature changed</li> <li><code>ChunkGroup</code> index and index renamed to pre/post order index <ul> <li>old getter is deprecated</li> </ul> </li> <li><code>ChunkTemplate.hooks.modules</code> signature changed</li> <li><code>ChunkTemplate.hooks.render</code> signature changed</li> <li><code>ChunkTemplate.updateHashForChunk</code> signature changed</li> <li><code>Compilation.hooks.optimizeChunkOrder</code> removed</li> <li><code>Compilation.hooks.optimizeModuleOrder</code> removed</li> <li><code>Compilation.hooks.advancedOptimizeModuleOrder</code> removed</li> <li><code>Compilation.hooks.optimizeDependenciesBasic</code> removed</li> <li><code>Compilation.hooks.optimizeDependenciesAdvanced</code> removed</li> <li><code>Compilation.hooks.optimizeModulesBasic</code> removed</li> <li><code>Compilation.hooks.optimizeModulesAdvanced</code> removed</li> <li><code>Compilation.hooks.optimizeChunksBasic</code> removed</li> <li><code>Compilation.hooks.optimizeChunksAdvanced</code> removed</li> <li><code>Compilation.hooks.optimizeChunkModulesBasic</code> removed</li> <li><code>Compilation.hooks.optimizeChunkModulesAdvanced</code> removed</li> <li><code>Compilation.hooks.optimizeExtractedChunksBasic</code> removed</li> <li><code>Compilation.hooks.optimizeExtractedChunks</code> removed</li> <li><code>Compilation.hooks.optimizeExtractedChunksAdvanced</code> removed</li> <li><code>Compilation.hooks.afterOptimizeExtractedChunks</code> removed</li> <li><code>Compilation.hooks.stillValidModule</code> added</li> <li><code>Compilation.hooks.statsPreset</code> added</li> <li><code>Compilation.hooks.statsNormalize</code> added</li> <li><code>Compilation.hooks.statsFactory</code> added</li> <li><code>Compilation.hooks.statsPrinter</code> added</li> <li><code>Compilation.fileDependencies</code>, <code>Compilation.contextDependencies</code> and <code>Compilation.missingDependencies</code> are now LazySets</li> <li><code>Compilation.entries</code> removed <ul> <li><strong>MIGRATION</strong>: Use <code>Compilation.entryDependencies</code> instead</li> </ul> </li> <li><code>Compilation._preparedEntrypoints</code> removed</li> <li><code>dependencyTemplates</code> is now a <code>DependencyTemplates</code> class instead of a raw <code>Map</code></li> <li><code>Compilation.fileTimestamps</code> and <code>contextTimestamps</code> removed <ul> <li><strong>MIGRATION</strong>: Use <code>Compilation.fileSystemInfo</code> instead</li> </ul> </li> <li><code>Compilation.waitForBuildingFinished</code> removed <ul> <li><strong>MIGRATION</strong>: Use the new queues</li> </ul> </li> <li><code>Compilation.addModuleDependencies</code> removed</li> <li><code>Compilation.prefetch</code> removed</li> <li><code>Compilation.hooks.beforeHash</code> is now called after the hashes of modules are created <ul> <li><strong>MIGRATION</strong>: Use <code>Compiliation.hooks.beforeModuleHash</code> instead</li> </ul> </li> <li><code>Compilation.applyModuleIds</code> removed</li> <li><code>Compilation.applyChunkIds</code> removed</li> <li><code>Compiler.root</code> added, which points to the root compiler <ul> <li>it can be used to cache data in WeakMaps instead of statically scoped</li> </ul> </li> <li><code>Compiler.hooks.afterDone</code> added</li> <li><code>Source.emitted</code> is no longer set by the Compiler <ul> <li><strong>MIGRATION</strong>: Check <code>Compilation.emittedAssets</code> instead</li> </ul> </li> <li><code>Compiler/Compilation.compilerPath</code> added: It's a unique name of the compiler in the compiler tree. (Unique to the root compiler scope)</li> <li><code>Module.needRebuild</code> deprecated <ul> <li><strong>MIGRATION</strong>: use <code>Module.needBuild</code> instead</li> </ul> </li> <li><code>Dependency.getReference</code> signature changed</li> <li><code>Dependency.getExports</code> signature changed</li> <li><code>Dependency.getWarnings</code> signature changed</li> <li><code>Dependency.getErrors</code> signature changed</li> <li><code>Dependency.updateHash</code> signature changed</li> <li><code>Dependency.module</code> removed</li> <li>There is now a base class for <code>DependencyTemplate</code></li> <li><code>MultiEntryDependency</code> removed</li> <li><code>EntryDependency</code> added</li> <li><code>EntryModuleNotFoundError</code> removed</li> <li><code>SingleEntryPlugin</code> removed</li> <li><code>EntryPlugin</code> added</li> <li><code>Generator.getTypes</code> added</li> <li><code>Generator.getSize</code> added</li> <li><code>Generator.generate</code> signature changed</li> <li><code>HotModuleReplacementPlugin.getParserHooks</code> added</li> <li><code>Parser</code> was moved to <code>JavascriptParser</code></li> <li><code>ParserHelpers</code> was moved to <code>JavascriptParserHelpers</code></li> <li><code>MainTemplate.hooks.moduleObj</code> removed</li> <li><code>MainTemplate.hooks.currentHash</code> removed</li> <li><code>MainTemplate.hooks.addModule</code> removed</li> <li><code>MainTemplate.hooks.requireEnsure</code> removed</li> <li><code>MainTemplate.hooks.globalHashPaths</code> removed</li> <li><code>MainTemplate.hooks.globalHash</code> removed</li> <li><code>MainTemplate.hooks.hotBootstrap</code> removed</li> <li><code>MainTemplate.hooks</code> some signatures changed</li> <li><code>Module.hash</code> deprecated</li> <li><code>Module.renderedHash</code> deprecated</li> <li><code>Module.reasons</code> removed</li> <li><code>Module.id</code> deprecated</li> <li><code>Module.index</code> deprecated</li> <li><code>Module.index2</code> deprecated</li> <li><code>Module.depth</code> deprecated</li> <li><code>Module.issuer</code> deprecated</li> <li><code>Module.profile</code> removed</li> <li><code>Module.prefetched</code> removed</li> <li><code>Module.built</code> removed</li> <li><code>Module.used</code> removed <ul> <li><strong>MIGRATION</strong>: Use <code>Module.getUsedExports</code> instead</li> </ul> </li> <li>Module.usedExports deprecated <ul> <li><strong>MIGRATION</strong>: Use <code>Module.getUsedExports</code> instead</li> </ul> </li> <li><code>Module.optimizationBailout</code> deprecated</li> <li><code>Module.exportsArgument</code> removed</li> <li><code>Module.optional</code> deprecated</li> <li><code>Module.disconnect</code> removed</li> <li><code>Module.unseal</code> removed</li> <li><code>Module.setChunks</code> removed</li> <li><code>Module.addChunk</code> deprecated</li> <li><code>Module.removeChunk</code> deprecated</li> <li><code>Module.isInChunk</code> deprecated</li> <li><code>Module.isEntryModule</code> deprecated</li> <li><code>Module.getChunks</code> deprecated</li> <li><code>Module.getNumberOfChunks</code> deprecated</li> <li><code>Module.chunksIterable</code> deprecated</li> <li><code>Module.hasEqualsChunks</code> removed</li> <li><code>Module.useSourceMap</code> moved to <code>NormalModule</code></li> <li><code>Module.addReason</code> removed</li> <li><code>Module.removeReason</code> removed</li> <li><code>Module.rewriteChunkInReasons</code> removed</li> <li><code>Module.isUsed</code> removed <ul> <li><strong>MIGRATION</strong>: Use <code>isModuleUsed</code>, <code>isExportUsed</code> and <code>getUsedName</code> instead</li> </ul> </li> <li><code>Module.updateHash</code> signature changed</li> <li><code>Module.sortItems</code> removed</li> <li><code>Module.unbuild</code> removed <ul> <li><strong>MIGRATION</strong>: Use <code>invalidateBuild</code> instead</li> </ul> </li> <li><code>Module.getSourceTypes</code> added</li> <li><code>Module.getRuntimeRequirements</code> added</li> <li><code>Module.size</code> signature changed</li> <li><code>ModuleFilenameHelpers.createFilename</code> signature changed</li> <li><code>ModuleProfile</code> class added with more data</li> <li><code>ModuleReason</code> removed</li> <li><code>ModuleTemplate.hooks</code> signatures changed</li> <li><code>ModuleTemplate.render</code> signature changed</li> <li><code>Compiler.dependencies</code> removed <ul> <li><strong>MIGRATION</strong>: Use <code>MultiCompiler.setDependencies</code> instead</li> </ul> </li> <li><code>MultiModule</code> removed</li> <li><code>MultiModuleFactory</code> removed</li> <li><code>NormalModuleFactory.fileDependencies</code>, <code>NormalModuleFactory.contextDependencies</code> and <code>NormalModuleFactory.missingDependencies</code> are now LazySets</li> <li><code>RuntimeTemplate</code> methods now take <code>runtimeRequirements</code> arguments</li> <li><code>serve</code> property is removed</li> <li><code>Stats.jsonToString</code> removed</li> <li><code>Stats.filterWarnings</code> removed</li> <li><code>Stats.getChildOptions</code> removed</li> <li><code>Stats</code> helper methods removed</li> <li><code>Stats.toJson</code> signature changed (second argument removed)</li> <li><code>ExternalModule.external</code> removed</li> <li><code>HarmonyInitDependency</code> removed</li> <li><code>Dependency.getInitFragments</code> deprecated <ul> <li><strong>MIGRATION</strong>: Use <code>apply</code> <code>initFragements</code> instead</li> </ul> </li> <li>DependencyReference now takes a function to a module instead of a Module</li> <li>HarmonyImportSpecifierDependency.redirectedId removed <ul> <li><strong>MIGRATION</strong>: Use <code>setId</code> instead</li> </ul> </li> <li>acorn 5 -> 8</li> <li>Testing <ul> <li>HotTestCases now runs for multiple targets <code>async-node</code> <code>node</code> <code>web</code> <code>webworker</code></li> <li>TestCases now also runs for filesystem caching with <code>store: "instant"</code> and <code>store: "pack"</code></li> <li>TestCases now also runs for deterministic module ids</li> </ul> </li> <li>Tooling added to order the imports (checked in CI)</li> <li>Chunk name mapping in runtime no longer contains entries when chunk name equals chunk id</li> <li>add <code>resolvedModuleId</code> <code>resolvedModuleIdentifier</code> and <code>resolvedModule</code> to reasons in Stats which point to the module before optimizations like scope hoisting</li> <li>show <code>resolvedModule</code> in Stats toString output</li> <li>loader-runner was upgraded: <a href="https://github.com/webpack/loader-runner/releases/tag/v3.0.0">https://github.com/webpack/loader-runner/releases/tag/v3.0.0</a></li> <li><code>file/context/missingDependencies</code> in <code>Compilation</code> are no longer sorted for performance reasons <ul> <li>Do not rely on the order</li> </ul> </li> <li>webpack-sources was upgraded to version 2: <a href="https://github.com/webpack/webpack-sources/releases/tag/v2.0.1">https://github.com/webpack/webpack-sources/releases/tag/v2.0.1</a></li> <li>webpack-command support was removed</li> <li>Use schema-utils@2 for schema validation</li> <li><code>Compiler.assetEmitted</code> has an improved second argument with more information</li> <li>BannerPlugin omits trailing whitespace</li> <li>removed <code>minChunkSize</code> option from <code>LimitChunkCountPlugin</code></li> <li>reorganize from javascript related files into sub-directory <ul> <li><code>webpack.JavascriptModulesPlugin</code> -> <code>webpack.javascript.JavascriptModulesPlugin</code></li> </ul> </li> <li>Logger.getChildLogger added</li> <li>change the default of entryOnly of the DllPlugin to true</li> <li>remove special request shortening logic and use single relative paths for readable module names</li> <li>allow webpack:// urls in SourceMaps to provided paths relative to webpack root context</li> <li>add API to generate and process CLI arguments targeting webpack configuration</li> <li>add <code>__system_context__</code> as context from System.js when using System.js as libraryTarget</li> <li>add bigint support for the DefinePlugin</li> <li>add bigint support for basic evaluations like maths</li> <li>remove ability to modify the compilation hash after the hash has been created</li> <li>remove HotModuleReplacementPlugin multiStep mode</li> <li><code>assetInfo</code> from <code>emitAsset</code> will now merge when nested objects or arrays are used</li> <li><code>[query]</code> is now a valid placeholder when for paths based on a <code>filename</code> like assets</li> <li>add <code>Compilation.deleteAsset</code> to correctly delete an assets and non-shared related assets</li> <li>expose <code>require("webpack-sources")</code> as <code>require("webpack").sources</code></li> <li>terser 5</li> <li>Webpack can be written with a capital W when at the start of a sentence</li> </ul> <h1 id="blog">Blog<a href="#blog" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p>새로운 소식은 여기에서 읽어보세요.</p> <p>최근 블로그 게시글은 사이드바에서 확인하실 수 있습니다.</p> <h2 id="popular-posts">Popular posts<a href="#popular-posts" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <ul> <li><a href="/blog/2020-10-10-webpack-5-release/">Webpack 5 release (2020-10-10)</a></li> </ul> </div><div class="contributors__section"><hr/><h3>Contributors</h3><div class="contributors"><div class="contributors__list"><a class="contributor" href="https://github.com/webpack"><img alt="webpack" src="/icon-square-small-slack.9281492bb267314634b4.png"/><span class="contributor__name"> <!-- -->webpack</span></a></div></div></div></div></section></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="/guides/getting-started/">Get Started</a><a class="footer__link" href="/comparison/">Comparison</a><a href="https://privacy-policy.openjsf.org/" target="_blank" rel="noopener noreferrer" class="footer__link">Privacy Policy</a></section><section class="footer__middle"><a class="footer__icon" href="/"><img src="/icon-square-small.85ba630cf0c5f29ae3e3.svg" alt="webpack icon"/></a></section><section class="footer__right"><a href="https://webpack.threadless.com/" target="_blank" rel="noopener noreferrer" class="footer__link">Swag Store</a><a class="footer__link" href="/glossary/">Glossary</a><a class="footer__link" href="/branding/">Branding</a><a href="https://gitter.im/webpack/webpack" target="_blank" rel="noopener noreferrer" class="footer__link">Gitter</a><a href="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener noreferrer" class="footer__link">Changelog</a><a class="footer__link footer__license" href="/license"><img alt="Creative Commons License" src="/cc.ab77d813bf219c6e34ff.svg"/><img alt="Creative Commons License" src="/by.1360bb2e6d1fc28cdd9e.svg"/></a></section></div></footer></div></div><script>
window.matchMedia('print').addListener(function(mql) {
  if (!mql.matches) {
      window.close();
  }
});
window.print();
</script></body>