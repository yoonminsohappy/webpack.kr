(self.webpackChunk=self.webpackChunk||[]).push([[1190],{1190:function(n,s,a){"use strict";a.r(s),s.default='<p>This guide only shows major changes that affect end users. For more details please see <a href="https://github.com/webpack/webpack/releases">the changelog</a>.</p> <h2 id="nodejs-v4">Node.js v4<a href="#nodejs-v4" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>If you are still using Node.js v4 or lower, you need to upgrade your Node.js installation to Node.js v6 or higher.</p> <p>Instructions for upgrading your Node.js version can be found <a href="https://stackoverflow.com/questions/10075990/upgrading-node-js-to-latest-version">here</a>.</p> <h2 id="cli">CLI<a href="#cli" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>The CLI has moved to a separate package: webpack-cli. You need to install it before using webpack, see <a href="/guides/getting-started/#basic-setup">basic setup</a>.</p> <p>The installation guide can be found <a href="/guides/installation">here</a>.</p> <h2 id="update-plugins">Update plugins<a href="#update-plugins" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>Many 3rd party plugins need to be updated to the latest versions to be compatible with webpack 4. Links to popular plugins can be found <a href="https://github.com/webpack-contrib/awesome-webpack#webpack-plugins">here</a>.</p> <h2 id="mode">mode<a href="#mode" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>Add the new <a href="/configuration/mode/"><code>mode</code></a> option to your configuration. Set it to <code>\'production\'</code>, <code>\'development\'</code> or <code>\'none\'</code> depending on your configuration type.</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-diff">module.exports = {\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // ...\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  mode: \'production\',\n</span></span>}</code></pre> <aside class="tip"><h6 class="tip__prefix">tip</h6><p>The purpose of <code>\'development\'</code> mode and <code>\'production\'</code> mode is different. You can use <code>webpack-merge</code> as shown in <a href="/guides/production/#setup">production guide</a> to optimize configurations.</p></aside> <h2 id="deprecatedremoved-plugins">Deprecated/Removed plugins<a href="#deprecatedremoved-plugins" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>These plugins can be removed from configuration as they are default in production mode:</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-diff">module.exports = {\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // ...\n</span><span class="token prefix unchanged"> </span><span class="token line"> plugins: [\n</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    new NoEmitOnErrorsPlugin(),\n</span><span class="token prefix deleted">-</span><span class="token line">    new ModuleConcatenationPlugin(),\n</span><span class="token prefix deleted">-</span><span class="token line">    new DefinePlugin({ "process.env.NODE_ENV": JSON.stringify("production") })\n</span><span class="token prefix deleted">-</span><span class="token line">    new UglifyJsPlugin()\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ],\n</span></span>}</code></pre> <p>These plugins are default in development mode</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-diff">module.exports = {\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // ...\n</span><span class="token prefix unchanged"> </span><span class="token line"> plugins: [\n</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    new NamedModulesPlugin()\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ],\n</span></span>}</code></pre> <p>These plugins were deprecated and are now removed:</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-diff">module.exports = {\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // ...\n</span><span class="token prefix unchanged"> </span><span class="token line"> plugins: [\n</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">    new NoErrorsPlugin(),\n</span><span class="token prefix deleted">-</span><span class="token line">    new NewWatchingPlugin()\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ],\n</span></span>}</code></pre> <h2 id="commonschunkplugin">CommonsChunkPlugin<a href="#commonschunkplugin" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>The <code>CommonsChunkPlugin</code> was removed. Instead the <a href="/configuration/optimization/#optimizationsplitchunks"><code>optimization.splitChunks</code></a> options can be used.</p> <p>See documentation of the <a href="/configuration/optimization/#optimizationsplitchunks"><code>optimization.splitChunks</code></a> for more details. The default configuration may already suit your needs.</p> <aside class="tip"><h6 class="tip__prefix">tip</h6><p>When generating the HTML from the stats you can use <code>optimization.splitChunks.chunks: "all"</code> which is the optimal configuration in most cases.</p></aside> <h2 id="import-and-commonjs">import() and CommonJS<a href="#import-and-commonjs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>When using <code>import()</code> to load non-ESM the result has changed in webpack 4. Now you need to access the <code>default</code> property to get the value of <code>module.exports</code>.</p> <p><strong>non-esm.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token function-variable function">sayHello</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'hello world\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p><strong>example.js</strong></p> <pre><code class="hljs language-javascript"><span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">\'./non-esm.js\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    module<span class="token punctuation">.</span>default<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre> <h2 id="json-and-loaders">json and loaders<a href="#json-and-loaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>When using a custom loader to transform <code>.json</code> files you now need to change the module <code>type</code>:</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-diff">module.exports = {\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // ...\n</span><span class="token prefix unchanged"> </span><span class="token line"> rules: [\n</span><span class="token prefix unchanged"> </span><span class="token line">   {\n</span><span class="token prefix unchanged"> </span><span class="token line">     test: /config\\.json$/,\n</span><span class="token prefix unchanged"> </span><span class="token line">     loader: \'special-loader\',\n</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     type: \'javascript/auto\',\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     options: {...}\n</span><span class="token prefix unchanged"> </span><span class="token line">   }\n</span><span class="token prefix unchanged"> </span><span class="token line"> ]\n</span></span>};</code></pre> <p>When still using the <code>json-loader</code>, it can be removed:</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-diff">module.exports = {\n<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> // ...\n</span><span class="token prefix unchanged"> </span><span class="token line"> rules: [\n</span><span class="token prefix unchanged"> </span><span class="token line">   {\n</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     test: /\\.json$/,\n</span><span class="token prefix deleted">-</span><span class="token line">     loader: \'json-loader\'\n</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }\n</span><span class="token prefix unchanged"> </span><span class="token line"> ]\n</span></span>};</code></pre> <h2 id="moduleloaders">module.loaders<a href="#moduleloaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>module.loaders</code> were deprecated since webpack 2 and are now removed in favor of <a href="/configuration/module/#rule"><code>module.rules</code></a>.</p> '}}]);