(self.webpackChunk=self.webpackChunk||[]).push([[1853],{1853:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return s}}),t(7378);var n=t(5318);function p(){return(p=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}const r={};function s({components:e,...a}){return(0,n.kt)("wrapper",p({},r,a,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("hr",null),(0,n.kt)("p",null,"title: Package exports\nsort: 25\ncontributors:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"sokra\ntranslators:"),(0,n.kt)("li",{parentName:"ul"},"keipark\nrelated:"),(0,n.kt)("li",{parentName:"ul"},"title: Package entry points in Node.js\nurl: ",(0,n.kt)("a",{parentName:"li",href:"https://nodejs.org/api/packages.html#packages_package_entry_points"},"https://nodejs.org/api/packages.html#packages_package_entry_points"))),(0,n.kt)("hr",null),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},'import "package"')," 또는 ",(0,n.kt)("inlineCode",{parentName:"p"},'import "package/sub/path"'),"와 같이 모듈을 요청할 때,\n패키지의 ",(0,n.kt)("inlineCode",{parentName:"p"},"package.json")," 내 ",(0,n.kt)("inlineCode",{parentName:"p"},"exports")," 필드에 어떤 모듈을 사용할지 선언할 수 있습니다.\n이를 통해 ",(0,n.kt)("inlineCode",{parentName:"p"},"main")," 필드 응답을 반환하는 기본 구현을 대체합니다.\n",(0,n.kt)("inlineCode",{parentName:"p"},"index.js")," 파일은 ",(0,n.kt)("inlineCode",{parentName:"p"},'"package"'),"를, 파일 시스템 조회는 ",(0,n.kt)("inlineCode",{parentName:"p"},'"package/sub/path"'),"를 대체합니다."),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"exports")," 필드가 명시되면 이러한 모듈 요청만 사용 가능합니다.\n그 외 다른 요청은 ModuleNotFound 오류가 발생합니다."),(0,n.kt)("h2",{id:"general-syntax"},"General syntax",(0,n.kt)("a",{parentName:"h2",href:"#general-syntax","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"일반적으로 ",(0,n.kt)("inlineCode",{parentName:"p"},"exports")," 필드는 객체를 가지며\n객체의 각각의 프로퍼티에는 모듈 요청의 하위 경로가 명시되어 있어야 합니다.\n위의 예시에서는 다음 프로퍼티를 사용할 수 있습니다.\n",(0,n.kt)("inlineCode",{parentName:"p"},'import "package"'),"에는 ",(0,n.kt)("inlineCode",{parentName:"p"},'"."'),"을, ",(0,n.kt)("inlineCode",{parentName:"p"},'import "package/sub/path"'),"에는 ",(0,n.kt)("inlineCode",{parentName:"p"},'"./sub/path"'),"를 사용할 수 있습니다.\n",(0,n.kt)("inlineCode",{parentName:"p"},"/"),"로 끝나는 프로퍼티는 요청에 이 접두사를 포함하여 이전 파일 시스템 조회 알고리즘으로 전달합니다.\n",(0,n.kt)("inlineCode",{parentName:"p"},"*"),"로 끝나는 프로퍼티의 경우 ",(0,n.kt)("inlineCode",{parentName:"p"},"*"),"는 어떤 값이든 가질 수 있으며, 프로퍼티 값의 모든 ",(0,n.kt)("inlineCode",{parentName:"p"},"*"),"는 가져온 값으로 대체됩니다."),(0,n.kt)("p",null,"예제:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"."'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./main.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"./sub/path"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./secondary.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"./prefix/"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./directory/"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"./prefix/deep/"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./other-directory/"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"./other-prefix/*"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./yet-another/*/*.js"'),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"모듈 요청"),(0,n.kt)("th",{parentName:"tr",align:null},"결과"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"모듈 요청"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"package"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"결과"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},".../package/main.js")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"모듈 요청"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"package/sub/path"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"결과"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},".../package/secondary.js")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"모듈 요청"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"package/prefix/some/file.js"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"결과"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},".../package/directory/some/file.js")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"모듈 요청"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"package/prefix/deep/file.js"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"결과"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},".../package/other-directory/file.js")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"모듈 요청"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"package/other-prefix/deep/file.js"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"결과"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},".../package/yet-another/deep/file/deep/file.js")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"모듈 요청"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"package/main.js"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"결과"},(0,n.kt)("span",{parentName:"td"},"Error"))))),(0,n.kt)("h2",{id:"alternatives"},"Alternatives",(0,n.kt)("a",{parentName:"h2",href:"#alternatives","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"패키지 작성자는 하나의 결과 대신 여러 개의 결과를 제공할 수 있습니다.\n이 경우 결과 목록을 순서대로 시도하고 첫 번째 유효한 결과를 사용합니다."),(0,n.kt)("p",null,"노트: 모든 유효한 결과가 아니라 첫 번째 유효한 결과만 사용합니다."),(0,n.kt)("p",null,"예제:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"./things/"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"["),(0,n.kt)("span",{parentName:"code",className:"token string"},'"./good-things/"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./bad-things/"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"]"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("p",null,"여기서 ",(0,n.kt)("inlineCode",{parentName:"p"},"package/things/apple"),"은 ",(0,n.kt)("inlineCode",{parentName:"p"},".../package/good-things/apple")," 또는 ",(0,n.kt)("inlineCode",{parentName:"p"},".../package/bad-things/apple"),"에서 찾을 수 있습니다."),(0,n.kt)("h2",{id:"conditional-syntax"},"Conditional syntax",(0,n.kt)("a",{parentName:"h2",href:"#conditional-syntax","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"exports")," 필드에 직접 결과를 제공하는 대신\n패키지 작성자는 모듈 시스템이 환경 조건에 따라 결과를 선택하도록 할 수 있습니다."),(0,n.kt)("p",null,"이 경우 결과에 대한 객체 매핑 조건을 사용해야 합니다.\n조건은 객체 순서대로 시도됩니다.\n유효하지 않은 결과가 포함된 조건은 건너뜁니다.\n논리적 AND를 만들기 위해 조건이 중첩될 수 있습니다.\n객체의 마지막 조건은 특별한 ",(0,n.kt)("inlineCode",{parentName:"p"},'"default"')," 조건일 수 있습니다.\n이 조건은 항상 매치됩니다."),(0,n.kt)("p",null,"예제:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"."'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"red"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./stop.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"yellow"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./stop.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"green"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"free"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./drive.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./wait.js"'),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./drive-carefully.js"'),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("p",null,"위 조건은 다음과 같이 번역됩니다."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-js"},(0,n.kt)("span",{parentName:"code",className:"token keyword"},"if")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),"red ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"&&")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},"valid"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token string"},"'./stop.js'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"return")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},"'./stop.js'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"if")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),"yellow ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"&&")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},"valid"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token string"},"'./stop.js'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"return")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},"'./stop.js'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"if")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),"green",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"if")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),"free ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"&&")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},"valid"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token string"},"'./drive.js'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"return")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},"'./drive.js'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"if")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token function"},"valid"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token string"},"'./wait.js'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"return")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},"'./wait.js'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"if")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token function"},"valid"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token string"},"'./drive-carefully.js'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"return")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},"'./drive-carefully.js'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"throw")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,n.kt)("span",{parentName:"code",className:"token class-name"},"ModuleNotFoundError"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"))),(0,n.kt)("p",null,"사용 가능한 조건은 모듈 시스템 및 도구에 따라 다릅니다."),(0,n.kt)("h2",{id:"abbreviation"},"Abbreviation",(0,n.kt)("a",{parentName:"h2",href:"#abbreviation","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"패키지에 대한 단일 엔트리 (",(0,n.kt)("inlineCode",{parentName:"p"},'"."'),")만 지원하는 경우 ",(0,n.kt)("inlineCode",{parentName:"p"},'{ ".": ...}')," 객체 중첩을 생략할 수 있습니다."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index.mjs"'),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"red"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./stop.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"green"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./drive.js"'),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("h2",{id:"notes-about-ordering"},"Notes about ordering",(0,n.kt)("a",{parentName:"h2",href:"#notes-about-ordering","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"각 키가 조건인 객체일 경우 프로퍼티 순서가 매우 중요합니다. 조건은 명시된 순서대로 처리됩니다."),(0,n.kt)("p",null,"예: ",(0,n.kt)("inlineCode",{parentName:"p"},'{ "red": "./stop.js", "green": "./drive.js"}')," != ",(0,n.kt)("inlineCode",{parentName:"p"},'{"green": "./drive.js", "red": "./stop.js"}'),"(",(0,n.kt)("inlineCode",{parentName:"p"},"red")," 및 ",(0,n.kt)("inlineCode",{parentName:"p"},"green")," 조건이 모두 설정된 경우 첫 번째 프로퍼티가 사용됩니다)"),(0,n.kt)("p",null,"각 키가 하위 경로인 객체에서는 프로퍼티(하위 경로) 순서가 크게 중요하지 않습니다. 덜 구체적인 경로보다 더 구체적인 경로가 우선됩니다."),(0,n.kt)("p",null,"예: ",(0,n.kt)("inlineCode",{parentName:"p"},'{ "./a/": "./x/", "./a/b/": "./y/", "./a/b/c": "./z" }')," == ",(0,n.kt)("inlineCode",{parentName:"p"},'{ "./a/b/c": "./z", "./a/b/": "./y/", "./a/": "./x/" }')," (순서는 항상 ",(0,n.kt)("inlineCode",{parentName:"p"},"./a/b/c")," > ",(0,n.kt)("inlineCode",{parentName:"p"},"./a/b/")," > ",(0,n.kt)("inlineCode",{parentName:"p"},"./a/")," 입니다)"),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"main"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"module"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"browser")," 또는 커스텀 필드와 같은 다른 패키지 엔트리 필드보다 ",(0,n.kt)("inlineCode",{parentName:"p"},"exports")," 필드가 우선됩니다."),(0,n.kt)("h2",{id:"support"},"Support",(0,n.kt)("a",{parentName:"h2",href:"#support","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"기능"),(0,n.kt)("th",{parentName:"tr",align:null},"지원"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"기능"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},'"."')," 속성")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, rollup, esinstall, wmr"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"기능"},(0,n.kt)("span",{parentName:"td"},"일반 속성")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, rollup, esinstall, wmr"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"기능"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"/"),"로 끝나는 속성")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js",(0,n.kt)("sup",null,"(1)"),", webpack, rollup, esinstall",(0,n.kt)("sup",null,"(2)"),", wmr",(0,n.kt)("sup",null,"(3)")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"기능"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"*"),"로 끝나는 속성")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, rollup, esinstall"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"기능"},(0,n.kt)("span",{parentName:"td"},"alternatives")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, rollup, ",(0,n.kt)("strike",null,"esinstall"),(0,n.kt)("sup",null,"(4)")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"기능"},(0,n.kt)("span",{parentName:"td"},"path에만 축약형 사용")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, rollup, esinstall, wmr"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"기능"},(0,n.kt)("span",{parentName:"td"},"조건에만 축약형 사용")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, rollup, esinstall, wmr"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"기능"},(0,n.kt)("span",{parentName:"td"},"조건 구문")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, rollup, esinstall, wmr"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"기능"},(0,n.kt)("span",{parentName:"td"},"중첩된 조건 구문")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, rollup, wmr",(0,n.kt)("sup",null,"(5)")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"기능"},(0,n.kt)("span",{parentName:"td"},"조건 순서")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, rollup, wmr",(0,n.kt)("sup",null,"(6)")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"기능"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},'"default"')," 조건")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, rollup, esinstall, wmr"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"기능"},(0,n.kt)("span",{parentName:"td"},"경로 순서")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, rollup"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"기능"},(0,n.kt)("span",{parentName:"td"},"매핑되지 않았을 때 오류")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, rollup, esinstall, wmr",(0,n.kt)("sup",null,"(7)")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"기능"},(0,n.kt)("span",{parentName:"td"},"조건과 경로를 혼합해서 사용할 때 오류")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, rollup"))))),(0,n.kt)("p",null,"(1) Node.js 에서 더 이상 사용되지 않으며 ",(0,n.kt)("inlineCode",{parentName:"p"},"*"),"를 사용해야 합니다."),(0,n.kt)("p",null,"(2) ",(0,n.kt)("inlineCode",{parentName:"p"},'"./"')," 키는 의도적으로 무시됩니다."),(0,n.kt)("p",null,"(3) 프로퍼티 값은 무시되고 프로퍼티 키가 대상으로 사용됩니다. 키와 값이 동일한 경우에만 효과적으로 매핑을 허용합니다."),(0,n.kt)("p",null,"(4) 구문을 지원하지만, 항상 첫 번째 엔트리가 사용되므로 실제로는 사용할 수 없습니다."),(0,n.kt)("p",null,"(5) 다른 형제 부모 조건으로 폴백시 올바르지 않게 처리됩니다."),(0,n.kt)("p",null,"(6) ",(0,n.kt)("inlineCode",{parentName:"p"},"require")," 조건의 경우 객체 순서가 올바르지 않게 처리됩니다. 이것은 의도적으로, wmr이 참조하는 구문과 다르지 않기 때문입니다."),(0,n.kt)("p",null,"(7) ",(0,n.kt)("inlineCode",{parentName:"p"},'"exports": "./file.js"')," 축약형을 사용하는 경우 ",(0,n.kt)("inlineCode",{parentName:"p"},"package/not-existing"),"과 같은 모든 요청은 이에 맞게 해석됩니다. 축약형을 사용하지 않는 경우 ",(0,n.kt)("inlineCode",{parentName:"p"},"package/file.js"),"와 같이 직접 파일에 접근해도 오류로 이어지지 않습니다."),(0,n.kt)("h2",{id:"conditions"},"Conditions",(0,n.kt)("a",{parentName:"h2",href:"#conditions","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("h3",{id:"reference-syntax"},"Reference syntax",(0,n.kt)("a",{parentName:"h3",href:"#reference-syntax","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"모듈을 참조하는 데 사용되는 구문에 따라 다음 조건 중 하나가 설정됩니다."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"조건"),(0,n.kt)("th",{parentName:"tr",align:null},"설명"),(0,n.kt)("th",{parentName:"tr",align:null},"지원"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"import"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"ESM 또는 유사한 구문에서 요청이 발생합니다.")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, rollup, esinstall",(0,n.kt)("sup",null,"(1)"),", wmr",(0,n.kt)("sup",null,"(1)")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"require"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"CommonJs/AMD 또는 유사한 구문에서 요청이 발생합니다.")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, rollup, esinstall",(0,n.kt)("sup",null,"(1)"),", wmr",(0,n.kt)("sup",null,"(1)")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"style"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"스타일시트 참조에서 요청이 발생합니다.")),(0,n.kt)("td",{parentName:"tr",align:null})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"sass"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"sass 스타일시트 참조에서 요청이 발생합니다.")),(0,n.kt)("td",{parentName:"tr",align:null})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"asset"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"애셋 참조에서 요청이 발생합니다.")),(0,n.kt)("td",{parentName:"tr",align:null})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"script"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"모듈 시스템 없이 스크립트 태그를 사용할때 요청이 발생합니다.")),(0,n.kt)("td",{parentName:"tr",align:null})))),(0,n.kt)("p",null,"부가적으로 아래의 조건도 설정할 수 있습니다."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"조건"),(0,n.kt)("th",{parentName:"tr",align:null},"설명"),(0,n.kt)("th",{parentName:"tr",align:null},"지원"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"module"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"javascript를 참조 가능한 모든 모듈 구문은 ESM을 지원합니다.",(0,n.kt)("br",null),"(",(0,n.kt)("inlineCode",{parentName:"span"},"import")," 또는 ",(0,n.kt)("inlineCode",{parentName:"span"},"require"),"와 함께 사용했을 때)")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"webpack, rollup, wmr"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"esmodules"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"지원하는 도구에서 항상 설정합니다.")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"wmr"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"types"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"type 선언과 관련 있는 typescript로부터 요청이 발생합니다.")),(0,n.kt)("td",{parentName:"tr",align:null})))),(0,n.kt)("p",null,"(1) 참조 구문에서 ",(0,n.kt)("inlineCode",{parentName:"p"},"import"),"와 ",(0,n.kt)("inlineCode",{parentName:"p"},"require"),"는 모두 독립적으로 설정됩니다. ",(0,n.kt)("inlineCode",{parentName:"p"},"require"),"는 항상 더 낮은 우선순위를 갖습니다."),(0,n.kt)("h4",{id:"import"},(0,n.kt)("inlineCode",{parentName:"h4"},"import"),(0,n.kt)("a",{parentName:"h4",href:"#import","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"다음 구문은 ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," 조건을 설정합니다."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"ESM의 ESM ",(0,n.kt)("inlineCode",{parentName:"li"},"import")," 선언"),(0,n.kt)("li",{parentName:"ul"},"JS ",(0,n.kt)("inlineCode",{parentName:"li"},"import()")," 표현식"),(0,n.kt)("li",{parentName:"ul"},"HTML의 HTML ",(0,n.kt)("inlineCode",{parentName:"li"},'<script type="module">')),(0,n.kt)("li",{parentName:"ul"},"HTML의 HTML ",(0,n.kt)("inlineCode",{parentName:"li"},'<link rel="preload/prefetch">')),(0,n.kt)("li",{parentName:"ul"},"JS ",(0,n.kt)("inlineCode",{parentName:"li"},'new Worker(..., { type: "module" })')),(0,n.kt)("li",{parentName:"ul"},"WASM ",(0,n.kt)("inlineCode",{parentName:"li"},"import"),"섹션"),(0,n.kt)("li",{parentName:"ul"},"ESM HMR(webpack) ",(0,n.kt)("inlineCode",{parentName:"li"},"import.hot.accept/decline([...])")),(0,n.kt)("li",{parentName:"ul"},"JS ",(0,n.kt)("inlineCode",{parentName:"li"},"Worklet.addModule")),(0,n.kt)("li",{parentName:"ul"},"자바스크립트를 엔트리 포인트로 사용")),(0,n.kt)("h4",{id:"require"},(0,n.kt)("inlineCode",{parentName:"h4"},"require"),(0,n.kt)("a",{parentName:"h4",href:"#require","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"다음 구문은 ",(0,n.kt)("inlineCode",{parentName:"p"},"require")," 조건을 설정합니다."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"CommonJs ",(0,n.kt)("inlineCode",{parentName:"li"},"require(...)")),(0,n.kt)("li",{parentName:"ul"},"AMD ",(0,n.kt)("inlineCode",{parentName:"li"},"define()")),(0,n.kt)("li",{parentName:"ul"},"AMD ",(0,n.kt)("inlineCode",{parentName:"li"},"require([...])")),(0,n.kt)("li",{parentName:"ul"},"CommonJs ",(0,n.kt)("inlineCode",{parentName:"li"},"require.resolve()")),(0,n.kt)("li",{parentName:"ul"},"CommonJs (webpack) ",(0,n.kt)("inlineCode",{parentName:"li"},"require.ensure([...])")),(0,n.kt)("li",{parentName:"ul"},"CommonJs (webpack) ",(0,n.kt)("inlineCode",{parentName:"li"},"require.context")),(0,n.kt)("li",{parentName:"ul"},"CommonJs HMR (webpack) ",(0,n.kt)("inlineCode",{parentName:"li"},"module.hot.accept/decline([...])")),(0,n.kt)("li",{parentName:"ul"},"HTML ",(0,n.kt)("inlineCode",{parentName:"li"},'<script src="...">'))),(0,n.kt)("h4",{id:"style"},(0,n.kt)("inlineCode",{parentName:"h4"},"style"),(0,n.kt)("a",{parentName:"h4",href:"#style","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"다음 구문은 ",(0,n.kt)("inlineCode",{parentName:"p"},"style")," 조건을 설정합니다."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"CSS ",(0,n.kt)("inlineCode",{parentName:"li"},"@import")),(0,n.kt)("li",{parentName:"ul"},"HTML ",(0,n.kt)("inlineCode",{parentName:"li"},'<link rel="stylesheet">'))),(0,n.kt)("h4",{id:"asset"},(0,n.kt)("inlineCode",{parentName:"h4"},"asset"),(0,n.kt)("a",{parentName:"h4",href:"#asset","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"다음 구문은 ",(0,n.kt)("inlineCode",{parentName:"p"},"asset")," 조건을 설정합니다."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"CSS ",(0,n.kt)("inlineCode",{parentName:"li"},"url()")),(0,n.kt)("li",{parentName:"ul"},"ESM ",(0,n.kt)("inlineCode",{parentName:"li"},"new URL(..., import.meta.url)")),(0,n.kt)("li",{parentName:"ul"},"HTML ",(0,n.kt)("inlineCode",{parentName:"li"},'<img src="...">'))),(0,n.kt)("h4",{id:"script"},(0,n.kt)("inlineCode",{parentName:"h4"},"script"),(0,n.kt)("a",{parentName:"h4",href:"#script","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"다음 구문은 ",(0,n.kt)("inlineCode",{parentName:"p"},"script")," 조건을 설정합니다."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"HTML ",(0,n.kt)("inlineCode",{parentName:"li"},'<script src="...">'))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"script"),"는 모듈 시스템을 지원하지 않는 경우에만 설정해야 합니다.\nCommonJs를 지원하는 시스템에서 스크립트를 전처리하는 경우,\n",(0,n.kt)("inlineCode",{parentName:"p"},"require"),"로 설정해야 합니다."),(0,n.kt)("p",null,"이 조건은 HTML 페이지에서 스트립트 태그로 삽입할 수 있고\n추가 전처리가 없는 자바스크립트 파일을 찾을 때 사용해야 합니다."),(0,n.kt)("h3",{id:"optimizations"},"Optimizations",(0,n.kt)("a",{parentName:"h3",href:"#optimizations","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"다양한 최적화를 위해 다음 조건이 설정됩니다."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"조건"),(0,n.kt)("th",{parentName:"tr",align:null},"설명"),(0,n.kt)("th",{parentName:"tr",align:null},"지원"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"production"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"프로덕션 환경.",(0,n.kt)("br",null),"개발 도구를 포함하지 않아야 합니다.")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"webpack"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"development"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"개발 환경.",(0,n.kt)("br",null),"개발 도구를 포함해야 합니다.")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"webpack"))))),(0,n.kt)("p",null,"노트: ",(0,n.kt)("inlineCode",{parentName:"p"},"production"),"과 ",(0,n.kt)("inlineCode",{parentName:"p"},"development"),"는 모두가 사용하는 것이 아닙니다. 이 중 아무것도 설정되지 않은 경우는 가정하지 않아야 합니다."),(0,n.kt)("h3",{id:"target-environment"},"Target environment",(0,n.kt)("a",{parentName:"h3",href:"#target-environment","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"대상 환경에 따라 다음 조건이 설정됩니다."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"조건"),(0,n.kt)("th",{parentName:"tr",align:null},"설명"),(0,n.kt)("th",{parentName:"tr",align:null},"지원"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"browser"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"Code will run in a browser.")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"webpack, esinstall, wmr"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"electron"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"Code will run in electron.",(0,n.kt)("sup",null,"(1)"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"webpack"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"worker"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"Code will run in a (Web)Worker.",(0,n.kt)("sup",null,"(1)"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"webpack"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"worklet"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"Code will run in a Worklet.",(0,n.kt)("sup",null,"(1)"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"-"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"node"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"Code will run in Node.js.")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"Node.js, webpack, wmr",(0,n.kt)("sup",null,"(2)")))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"deno"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"Code will run in Deno.")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"-"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"react-native"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"Code will run in react-native.")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"-"))))),(0,n.kt)("p",null,"(1) ",(0,n.kt)("inlineCode",{parentName:"p"},"electron"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"worker")," 및 ",(0,n.kt)("inlineCode",{parentName:"p"},"worklet"),"은 컨텍스트에 따라 ",(0,n.kt)("inlineCode",{parentName:"p"},"node")," 또는 ",(0,n.kt)("inlineCode",{parentName:"p"},"browser"),"와 결합합니다."),(0,n.kt)("p",null,"(2) 브라우저 대상 환경에 대해 설정됩니다."),(0,n.kt)("p",null,"각 환경에는 여러 버전이 있으므로 다음 가이드라인이 적용됩니다."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"node"),": 호환성은 ",(0,n.kt)("inlineCode",{parentName:"li"},"engines")," 필드를 참고하세요."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"browser"),": 패키지를 배포하는 시점의 현재 Spec 및 4단계 제안과 호환됩니다. 폴리필과 트랜스파일은 소비하는 쪽에서 처리되어야 합니다.",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"폴리필이나 트랜스파일이 불가능한 기능은 사용이 제한되므로 주의하여 사용해야 합니다."))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"deno"),": TBD"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"react-native"),": TBD")),(0,n.kt)("h3",{id:"conditions-preprocessor-and-runtimes"},"Conditions: Preprocessor and runtimes",(0,n.kt)("a",{parentName:"h3",href:"#conditions-preprocessor-and-runtimes","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"소스 코드를 전처리하는 도구에 따라 다음 조건이 설정됩니다."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"조건"),(0,n.kt)("th",{parentName:"tr",align:null},"설명"),(0,n.kt)("th",{parentName:"tr",align:null},"지원"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"조건"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"webpack"))),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"설명"},(0,n.kt)("span",{parentName:"td"},"webpack을 통해 처리됩니다.")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"webpack"))))),(0,n.kt)("p",null,"아쉽지만 Node.js 런타임에 대한 ",(0,n.kt)("inlineCode",{parentName:"p"},"node-js")," 조건이 없습니다.\n이것은 Node.js에 대한 예외 처리를 단순화합니다."),(0,n.kt)("h3",{id:"conditions-custom"},"Conditions: Custom",(0,n.kt)("a",{parentName:"h3",href:"#conditions-custom","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"다음 도구는 커스텀 조건을 지원합니다."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"도구"),(0,n.kt)("th",{parentName:"tr",align:null},"지원"),(0,n.kt)("th",{parentName:"tr",align:null},"노트"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"도구"},(0,n.kt)("span",{parentName:"td"},"Node.js")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"지원")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"노트"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"--conditions")," CLI 인자를 사용."))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"도구"},(0,n.kt)("span",{parentName:"td"},"webpack")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"지원")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"노트"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"resolve.conditionNames")," 설정 옵션을 사용."))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"도구"},(0,n.kt)("span",{parentName:"td"},"rollup")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"지원")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"노트"},(0,n.kt)("span",{parentName:"td"},(0,n.kt)("inlineCode",{parentName:"span"},"@rollup/plugin-node-resolve")," 에서 ",(0,n.kt)("inlineCode",{parentName:"span"},"exportConditions")," 옵션을 사용."))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"도구"},(0,n.kt)("span",{parentName:"td"},"esinstall")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"미지원")),(0,n.kt)("td",{parentName:"tr",align:null})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"도구"},(0,n.kt)("span",{parentName:"td"},"wmr")),(0,n.kt)("td",{parentName:"tr",align:null,"data-th":"지원"},(0,n.kt)("span",{parentName:"td"},"미지원")),(0,n.kt)("td",{parentName:"tr",align:null})))),(0,n.kt)("p",null,"커스텀 조건에는 다음 네이밍 스키마를 권장합니다."),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"<company-name>:<condition-name>")),(0,n.kt)("p",null,"예: ",(0,n.kt)("inlineCode",{parentName:"p"},"example-corp:beta"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"google:internal"),", `"),(0,n.kt)("h2",{id:"common-patterns"},"Common patterns",(0,n.kt)("a",{parentName:"h2",href:"#common-patterns","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"패키지의 모든 패턴은 단일 ",(0,n.kt)("inlineCode",{parentName:"p"},'"."')," 엔트리로 해석되지만, 각 엔트리의 패턴을 반복하여 복수의 엔트리로 확장할 수도 있습니다."),(0,n.kt)("p",null,"이 패턴은 엄격한 규칙이 아닌 가이드로 사용해야 합니다.\n개별 패키지에 맞게 조정할 수 있습니다."),(0,n.kt)("p",null,"이러한 패턴은 다음과 같은 목표와 가정을 기반으로 합니다."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"패키지가 운영되지 않는다.",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"어떤 시점에서 패키지가 더 이상 운영되지 않는다고 가정합니다. 하지만 패키지는 계속 사용됩니다."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"exports"),"는 향후 알려지지 않은 케이스에 대한 폴백으로 작성되어야 합니다. 이를 위해 ",(0,n.kt)("inlineCode",{parentName:"li"},"default")," 조건을 사용할 수 있습니다."),(0,n.kt)("li",{parentName:"ul"},"미래는 알 수 없기 때문에 브라우저와 유사한 환경, ESM과 유사한 모듈 시스템이라고 가정합니다."))),(0,n.kt)("li",{parentName:"ul"},"모든 도구가 모든 조건을 지원하지 않는다.",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"이러한 케이스를 처리하려면 폴백을 사용해야 합니다."),(0,n.kt)("li",{parentName:"ul"},"일반적으로 다음과 같은 폴백이 합리적으로 보입니다.",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"ESM > CommonJs"),(0,n.kt)("li",{parentName:"ul"},"Production > Development"),(0,n.kt)("li",{parentName:"ul"},"브라우저 > node.js")))))),(0,n.kt)("p",null,"패키지의 의도에 따라 다른 방법이 알맞을 수 있으며 패턴은 이를 따라야 합니다. 예를 들면, 커맨드라인 도구의 경우 브라우저와 같은 미래 환경에 대한 폴백은 별로 의미가 없으며, 이 경우에는 node.js와 같은 환경 및 폴백을 대신 사용해야 합니다."),(0,n.kt)("p",null,"사용 케이스가 복잡할 경우 조건을 중첩하여 여러 패턴을 결합해야 합니다."),(0,n.kt)("h3",{id:"target-environment-independent-packages"},"Target environment independent packages",(0,n.kt)("a",{parentName:"h3",href:"#target-environment-independent-packages","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"이 패턴은 환경별 API를 사용하지 않는 패키지에 적합합니다."),(0,n.kt)("h4",{id:"providing-only-an-esm-version"},"Providing only an ESM version",(0,n.kt)("a",{parentName:"h4",href:"#providing-only-an-esm-version","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"type"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index.js"'),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("p",null,"노트: ESM만 제공하면 node.js에 대한 제한이 따릅니다.\n이러한 패키지는 Node.js >= 14 에서 ",(0,n.kt)("inlineCode",{parentName:"p"},"import"),"를 사용할 때만 동작합니다.\n",(0,n.kt)("inlineCode",{parentName:"p"},"require()"),"으로는 동작하지 않습니다."),(0,n.kt)("h4",{id:"providing-commonjs-and-esm-version-stateless"},"Providing CommonJs and ESM version (stateless)",(0,n.kt)("a",{parentName:"h4",href:"#providing-commonjs-and-esm-version-stateless","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"type"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"node"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"require"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index.cjs"'),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index.js"'),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("p",null,"대부분의 도구는 ESM 버전을 받습니다.\n하지만 Node.js는 예외입니다.\n",(0,n.kt)("inlineCode",{parentName:"p"},"require()"),"를 사용할 때 CommonJs 버전을 얻습니다.\n",(0,n.kt)("inlineCode",{parentName:"p"},"require()")," 및 ",(0,n.kt)("inlineCode",{parentName:"p"},"import"),"를 참조할 때 패키지의 두 인스턴스로 이어지지만, 패키지에 state가 없기 때문에 문제 되지 않습니다."),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"require()")," ESM을 지원하는 도구로 노드 대상 코드를 전처리할 때 ",(0,n.kt)("inlineCode",{parentName:"p"},"module")," 조건은 최적화를 위해 사용됩니다. (예: Node.js 용 번들러)\n이러한 도구의 경우 예외를 건너뜁니다.\n기술적으로 선택 사항이지만 그렇지 않으면 번들러에는 패키지 소스 코드가 두 번 포함됩니다."),(0,n.kt)("p",null,"JSON 파일에서 패키지 state를 분리할 수 있는 경우 stateless 패턴을 사용할 수도 있습니다.\nJSON은 다른 모듈 시스템 그래프에 영향 없이 CommonJs 및 ESM에서 사용할 수 있습니다."),(0,n.kt)("p",null,"여기서 stateless는 클래스 인스턴스가 ",(0,n.kt)("inlineCode",{parentName:"p"},"instanceof"),"로 테스트 되지 않음을 의미합니다. 이중 모듈 인스턴스화로 인해 두 개의 다른 클래스가 있을 수 있기 때문입니다."),(0,n.kt)("h4",{id:"providing-commonjs-and-esm-version-stateful"},"Providing CommonJs and ESM version (stateful)",(0,n.kt)("a",{parentName:"h4",href:"#providing-commonjs-and-esm-version-stateful","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"type"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"node"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"import"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./wrapper.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"require"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index.cjs"'),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index.js"'),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-js"},(0,n.kt)("span",{parentName:"code",className:"token comment"},"// wrapper.js"),"\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"import")," cjs ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"from")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},"'./index.cjs'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"export")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,n.kt)("span",{parentName:"code",className:"token constant"},"A")," ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"=")," cjs",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,n.kt)("span",{parentName:"code",className:"token constant"},"A"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"export")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"const")," ",(0,n.kt)("span",{parentName:"code",className:"token constant"},"B")," ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"=")," cjs",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,n.kt)("span",{parentName:"code",className:"token constant"},"B"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"))),(0,n.kt)("p",null,"stateful 패키지에서는 패키지가 두 번 인스턴스화되지 않도록 해야합니다."),(0,n.kt)("p",null,"대부분의 도구에서 문제가 되지 않지만 Node.js는 여기서도 예외입니다.\nNode.js는 항상 CommonJs 버전을 사용하고 ESM 래퍼를 사용하여 ESM에 명명된 export를 노출합니다."),(0,n.kt)("p",null,"다시 ",(0,n.kt)("inlineCode",{parentName:"p"},"module")," 조건을 최적화를 위해 사용합니다."),(0,n.kt)("h4",{id:"providing-only-a-commonjs-version"},"Providing only a CommonJs version",(0,n.kt)("a",{parentName:"h4",href:"#providing-only-a-commonjs-version","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"type"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"commonjs"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index.js"'),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},'"type": "commonjs"'),"를 제공하면 CommonJs 파일을 정적으로 감지할 수 있습니다."),(0,n.kt)("h4",{id:"providing-a-bundled-script-version-for-direct-browser-consumption"},"Providing a bundled script version for direct browser consumption",(0,n.kt)("a",{parentName:"h4",href:"#providing-a-bundled-script-version-for-direct-browser-consumption","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"type"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"script"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./dist-bundle.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index.js"'),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"dist-bundle.js"),"에 ",(0,n.kt)("inlineCode",{parentName:"p"},'"type": "module"')," 및 ",(0,n.kt)("inlineCode",{parentName:"p"},".js"),"를 사용하더라도 이 파일은 ESM 형식이 아닙니다.\n스크립트 태그로 직접 사용 할 수 있도록 전역을 사용해야 합니다."),(0,n.kt)("h3",{id:"providing-devtools-or-production-optimizations"},"Providing devtools or production optimizations",(0,n.kt)("a",{parentName:"h3",href:"#providing-devtools-or-production-optimizations","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"이러한 패턴은 패키지에 개발용과 프로덕션용 두 가지 버전이 있을 때 의미가 있습니다.\n예를 들면 개발 버전에는 더 나은 오류 메시지 또는 부가적인 경고를 위한 추가 코드가 포함될 수 있습니다."),(0,n.kt)("h4",{id:"without-nodejs-runtime-detection"},"Without Node.js runtime detection",(0,n.kt)("a",{parentName:"h4",href:"#without-nodejs-runtime-detection","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"type"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"development"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-with-devtools.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-optimized.js"'),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"development")," 조건을 지원하면 개발을 위해 향상된 버전을 사용합니다.\n프로덕션 버전 또는 모드를 알 수 없는 경우에는 최적화된 버전을 사용합니다."),(0,n.kt)("h4",{id:"with-nodejs-runtime-detection"},"With Node.js runtime detection",(0,n.kt)("a",{parentName:"h4",href:"#with-nodejs-runtime-detection","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"type"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"development"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-with-devtools.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"production"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-optimized.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"node"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./wrapper-process-env.cjs"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-optimized.js"'),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-js"},(0,n.kt)("span",{parentName:"code",className:"token comment"},"// wrapper-process-env.cjs"),"\n",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"if")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),"process",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),"env",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),(0,n.kt)("span",{parentName:"code",className:"token constant"},"NODE_ENV")," ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"!==")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},"'development'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  module",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),"exports ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},"require"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token string"},"'./index-optimized.cjs'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,n.kt)("span",{parentName:"code",className:"token keyword"},"else")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  module",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"."),"exports ",(0,n.kt)("span",{parentName:"code",className:"token operator"},"=")," ",(0,n.kt)("span",{parentName:"code",className:"token function"},"require"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"("),(0,n.kt)("span",{parentName:"code",className:"token string"},"'./index-with-devtools.cjs'"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},")"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("p",null,"프로덕션/개발 모드를 감지할 때 ",(0,n.kt)("inlineCode",{parentName:"p"},"production")," 또는 ",(0,n.kt)("inlineCode",{parentName:"p"},"development")," 조건을 통한 정적 감지를 선호합니다."),(0,n.kt)("p",null,"Node.js는 런타임에 ",(0,n.kt)("inlineCode",{parentName:"p"},"process.env.NODE_ENV"),"를 통해 프로덕션/개발 모드를 감지할 수 있으므로 Node.js에서 이를 폴백으로 사용합니다. 동기화 조건부 import ESM은 불가능하며 패키지를 두 번 로드하지 않아야 하므로 CommonJs로 런타임을 감지해야 합니다."),(0,n.kt)("p",null,"모드를 감지할 수 없는 경우 프로덕션 버전으로 대체합니다."),(0,n.kt)("h3",{id:"providing-different-versions-depending-on-target-environment"},"Providing different versions depending on target environment",(0,n.kt)("a",{parentName:"h3",href:"#providing-different-versions-depending-on-target-environment","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"패키지가 향후 환경을 지원할 수 있도록 폴백 환경을 선택해야 합니다.\n일반적으로 브라우저와 같은 환경을 가정해야 합니다."),(0,n.kt)("h4",{id:"providing-nodejs-webworker-and-browser-versions"},"Providing Node.js, WebWorker and browser versions",(0,n.kt)("a",{parentName:"h4",href:"#providing-nodejs-webworker-and-browser-versions","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"type"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"node"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-node.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"worker"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-worker.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index.js"'),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("h4",{id:"providing-nodejs-browser-and-electron-versions"},"Providing Node.js, browser and electron versions",(0,n.kt)("a",{parentName:"h4",href:"#providing-nodejs-browser-and-electron-versions","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"type"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"electron"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"node"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-electron-node.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-electron.js"'),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"node"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-node.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index.js"'),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("h3",{id:"combining-patterns"},"Combining patterns",(0,n.kt)("a",{parentName:"h3",href:"#combining-patterns","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("h4",{id:"example-1"},"Example 1",(0,n.kt)("a",{parentName:"h4",href:"#example-1","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"아래 예제는 ",(0,n.kt)("inlineCode",{parentName:"p"},"process.env"),"에 대한 런타임 감지와 프로덕션 및 개발을 위해 최적화를 제공하는 패키지입니다. CommonJs 및 ESM 버전도 제공합니다."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"type"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"node"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"development"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-with-devtools.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"import"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./wrapper-with-devtools.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"require"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-with-devtools.cjs"'),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"production"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-optimized.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"import"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./wrapper-optimized.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"require"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-optimized.cjs"'),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./wrapper-process-env.cjs"'),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"development"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-with-devtools.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"production"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-optimized.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-optimized.js"'),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("h4",{id:"example-2"},"Example 2",(0,n.kt)("a",{parentName:"h4",href:"#example-2","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("p",null,"이 예제는 Node.js, 브라우저 및 electron을 지원합니다. ",(0,n.kt)("inlineCode",{parentName:"p"},"process.env"),"에 대한 런타임 감지와 프로덕션 및 개발을 위한 최적화를 제공하며 CommonJs 및 ESM 버전도 제공합니다."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"hljs language-json"},(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"type"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"exports"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"electron"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"node"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"development"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n          ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-electron-node-with-devtools.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n          ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"import"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./wrapper-electron-node-with-devtools.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n          ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"require"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-electron-node-with-devtools.cjs"'),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"production"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n          ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-electron-node-optimized.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n          ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"import"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./wrapper-electron-node-optimized.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n          ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"require"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-electron-node-optimized.cjs"'),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./wrapper-electron-node-process-env.cjs"'),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"development"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-electron-with-devtools.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"production"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-electron-optimized.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-electron-optimized.js"'),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"node"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"development"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-node-with-devtools.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"import"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./wrapper-node-with-devtools.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"require"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-node-with-devtools.cjs"'),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"production"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"module"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-node-optimized.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"import"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./wrapper-node-optimized.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"require"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-node-optimized.cjs"'),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./wrapper-node-process-env.cjs"'),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"development"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-with-devtools.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"production"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-optimized.js"'),(0,n.kt)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,n.kt)("span",{parentName:"code",className:"token property"},'"default"'),(0,n.kt)("span",{parentName:"code",className:"token operator"},":")," ",(0,n.kt)("span",{parentName:"code",className:"token string"},'"./index-optimized.js"'),"\n  ",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,n.kt)("span",{parentName:"code",className:"token punctuation"},"}"))),(0,n.kt)("p",null,"맞습니다. 복잡해 보이죠. ",(0,n.kt)("inlineCode",{parentName:"p"},"node"),"에만 CommonJs 버전이 필요하고 ",(0,n.kt)("inlineCode",{parentName:"p"},"process.env"),"를 사용하여 프로덕션/개발 모드를 감지 할 수 있다고 가정하여 복잡성을 줄였습니다."),(0,n.kt)("h2",{id:"guidelines"},"Guidelines",(0,n.kt)("a",{parentName:"h2",href:"#guidelines","aria-hidden":"true",tabIndex:-1},(0,n.kt)("span",{parentName:"a",className:"header-link"}))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"default")," export를 피하십시오. 툴링 마다 다르게 처리됩니다. 명명된 export만 사용하세요."),(0,n.kt)("li",{parentName:"ul"},"다른 조건에 대해 다른 API 또는 의미를 부여하지 않아야 합니다."),(0,n.kt)("li",{parentName:"ul"},"소스 코드를 ESM으로 작성하고 babel, typescript 또는 유사한 도구를 통해 CJS로 트랜스파일하세요."),(0,n.kt)("li",{parentName:"ul"},"package.json에서 ",(0,n.kt)("inlineCode",{parentName:"li"},".cjs")," 또는 ",(0,n.kt)("inlineCode",{parentName:"li"},'type: "commonjs"'),"를 사용하여 소스 코드를 CommonJs로 명확하게 표시하세요. CommonJs 또는 ESM을 사용하는 경우 도구가 이를 정적으로 감지 할 수 있습니다. 이는 ESM만 지원하고 CommonJs는 지원하지 않는 도구의 경우 중요합니다."),(0,n.kt)("li",{parentName:"ul"},"패키지에서 사용하는 ESM은 다음 유형의 요청을 지원합니다.",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"package.json이 있는 다른 패키지를 가리키는 모듈 요청을 지원합니다."),(0,n.kt)("li",{parentName:"ul"},"패키지 내의 다른 파일을 가리키는 상대적 요청을 지원합니다.",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"패키지 외부의 파일을 가리켜서는 안 됩니다."))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"data:")," URL 요청을 지원합니다."),(0,n.kt)("li",{parentName:"ul"},"기타 절대적 요청 또는 서버와 관련된 요청은 기본적으로 지원되지 않지만, 일부 도구 또는 환경에서는 지원할 수 있습니다.")))))}s.isMDXComponent=!0}}]);